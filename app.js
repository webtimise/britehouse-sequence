import{a as e,m as t,r as i,g as s,S as a,s as n,c as r,b as o,d as l,_ as h,l as c,e as m,f as d,u}from"./vendors.js";const g=(e,t)=>class extends e{constructor(...e){if(super(...e),this.prototypeType=t,!this.id){const e=p.get()+1;p.set(e),this.id=`${this.prototypeType.toLowerCase()}-${e}`}}connectedCallback(){"function"==typeof e.prototype.connectedCallback&&e.prototype.connectedCallback.call(this),y.set([...y.get(),this])}disconnectedCallback(){"function"==typeof e.prototype.disconnectedCallback&&e.prototype.disconnectedCallback.call(this),y.set(y.get().filter(e=>e.id!==this.id))}},p=e(0),y=e([]),f=(e,t=[])=>{let i=[];return"string"==typeof t?i=[t]:Array.isArray(t)?i=t:t instanceof HTMLElement&&t.id&&(i=[`#${t.id}`]),y.get().filter(t=>e===t.prototypeType&&!i.some(e=>t.matches(e)))},w=t({width:window.innerWidth,height:window.innerHeight}),b=t({width:window.innerWidth,height:window.innerHeight});window.addEventListener("resize",()=>{w.setKey("width",window.innerWidth),w.setKey("height",window.innerHeight)}),window.addEventListener("resize",i(()=>{b.setKey("width",window.innerWidth),b.setKey("height",window.innerHeight)},200));const S=document.documentElement,v=t({sm:getComputedStyle(S).getPropertyValue("--breakpoint-sm").trim()||"768px"}),I=t({reducedMotion:"(prefers-reduced-motion: reduce)",darkMode:"(prefers-color-scheme: dark)",touchScreen:"(hover: none)",touchOrSmall:`(max-width: ${v.get().sm}), (hover: none)`,small:`(max-width: ${v.get().sm})`,medium:`(min-width: ${v.get().sm}) and (max-width: 1200px)`,large:"(min-width: 1200px)"}),T=e=>{try{return matchMedia(e)}catch(t){return{matches:!1,addEventListener:()=>{}}}},C={reducedMotion:T(I.get().reducedMotion),darkMode:T(I.get().darkMode),touchScreen:T(I.get().touchScreen),touchOrSmall:T(I.get().touchOrSmall),small:T(I.get().small),medium:T(I.get().medium),large:T(I.get().large)},E=t({isReducedMotion:C.reducedMotion.matches,isDarkMode:C.darkMode.matches,isTouchScreen:C.touchScreen.matches,isTouchOrSmall:C.touchOrSmall.matches,isSmall:C.small.matches,isMedium:C.medium.matches,isLarge:C.large.matches,isDesktop:!C.touchScreen.matches,isMobile:C.small.matches&&C.touchScreen.matches,isTablet:C.medium.matches&&C.touchScreen.matches});Object.entries(C).forEach(([e,t])=>{t.addEventListener("change",()=>{const i=`is${e.charAt(0).toUpperCase()+e.slice(1)}`;E.setKey(i,t.matches),E.setKey("isDesktop",!C.touchScreen.matches),E.setKey("isMobile",C.small.matches&&C.touchScreen.matches),E.setKey("isTablet",C.medium.matches&&C.touchScreen.matches)})});const A=window.matchMedia("(any-pointer:coarse)").matches,L=Object.freeze({NAME:"production",IS_PROD:!0,IS_DEV:!1,IS_MOBILE:A,IS_DESKTOP:!A,SUPPORTS_VH:"CSS"in window&&"supports"in window.CSS&&window.CSS.supports("height: 100svh")&&window.CSS.supports("height: 100dvh")&&window.CSS.supports("height: 100lvh")}),M=Object.freeze({LOADING:"is-loading",FIRST_LOADED:"is-first-loaded",LOADED:"is-loaded",READY:"is-ready",TRANSITION:"is-transitioning",FONTS_LOADED:"fonts-loaded",LAZY_CONTAINER:"c-lazy",LAZY_LOADED:"-lazy-loaded",HAS_SCROLLED:"has-scrolled",HAS_MODAL_OPEN:"has-modal-open",SEQUENCE_LOADED:"is-sequence-loaded"}),$=Object.freeze({VISIT_START:"visit.start",GO_TO:"load.goTo",MODAL_OPEN:"modal.open",MODAL_CLOSE:"modal.close",WEBGL_READY:"webgl-ready",WEBGL_ERROR:"webgl-error"}),P=Object.freeze({EAGER:[{family:"Foundersgrotesk",style:"normal",weight:400},{family:"Foundersgrotesk",style:"normal",weight:600}],OPTIONS:{timeout:5e3,display:"swap"}});L.IS_MOBILE;const R="fonts"in document;function k(e,t){for(const[i,s]of Object.entries(t))switch(i){case"family":if(_(e[i])!==s)return!1;break;case"weight":if(e[i]!=s)return!1;break;default:if(e[i]!==s)return!1}return!0}function O(e,t){const i=_(e.family);return _(i)===t||t.endsWith(_(i))&&(t.match(e.weight)||t.match(e.style)),!0}function x(e){Array.isArray(e)||(e=[e]);const t=new Set;return e.forEach(e=>{if(e)switch(typeof e){case"string":return void t.add(...function(e){const t=[];for(const i of document.fonts)O(i,e)&&t.push(i);return t}(e));case"object":return void t.add(...function(e){const t=[];for(const i of document.fonts)k(i,e)&&t.push(i);return t}(e))}throw new TypeError("Expected font query to be font shorthand or font reference")}),[...t]}async function N(e){return await("unloaded"===e.status?e.load():e.loaded).then(e=>e,t=>e)}function _(e){return e.replace(/['"]+/g,"")}async function D(e){const t=x(e);return await Promise.all(t.map(e=>e.loaded))}s.registerPlugin(a);class F extends HTMLElement{static PREV_CLASS="is-prev";static ACTIVE_CLASS="is-active";constructor(){super(),this.$text=this.querySelector("[data-split-text]")||this,this.splitInstance=null,this.isSplitting=!1,this.isRichText=!1,this.richTextContainer=null,this.richTextElements=[],this.richTextSplitInstances=[],this.onResize=this.onResize.bind(this),this.onSmallScreenChange=this.onSmallScreenChange.bind(this)}async connectedCallback(){try{this.detectRichText(),await Promise.all([document.fonts.ready,D(P.EAGER)]),this.bindEvents(),this.onFontsLoaded()}catch(e){}}disconnectedCallback(){this.unbindEvents(),this.resetSplit()}detectRichText(){const e=this.$text.classList.contains("rich-text")?this.$text:this.$text.querySelector(".rich-text");e&&(this.isRichText=!0,this.richTextContainer=e,this.richTextElements=Array.from(e.querySelectorAll("p, h1, h2, h3, h4, h5, h6, li, blockquote")).filter(e=>e.textContent.trim().length>0))}bindEvents(){this.unbindScreenListener=b.subscribe(this.onResize),this.unbindDeviceListener=n(E,["isSmall"],this.onSmallScreenChange)}unbindEvents(){this.unbindScreenListener?.(),this.unbindDeviceListener?.()}onSmallScreenChange=e=>{};onFontsLoaded=()=>{E.get().isSmall||this.reSplit()};onResize=()=>{this.reSplit()};handleLineBreaks(){const e=this.$text.innerHTML;this.$text.innerHTML=e.replace(/<br\s*\/?>/gi,"\n")}prepareSemanticTag(e){if(!["h1","h2","h3","h4","h5","h6","p"].includes(e.tagName.toLowerCase()))return e;if(e.querySelector("[data-split-wrapper]"))return e.querySelector("[data-split-wrapper]");const t=Array.from(e.childNodes),i=e.textContent.trim(),s=document.createElement("span");return s.dataset.splitWrapper="true",s.style.display="inherit",s.setAttribute("aria-hidden","true"),t.forEach(e=>{s.appendChild(e.cloneNode(!0))}),e.innerHTML="",e.setAttribute("aria-label",i),e.appendChild(s),s}split(){this.isRichText?this.splitRichText():this.splitNormal()}splitNormal(){try{const e=this.dataset.splitType||this.$text.dataset.splitType||"words",t=this.dataset.splitMask||this.$text.dataset.splitMask||e;e.includes("lines");const i=this.prepareSemanticTag(this.$text);this.splitInstance=a.create(i,{type:e,tag:"span",linesClass:"split-line",wordsClass:"split-word",charsClass:"split-char",mask:t,autoSplit:!1});const s=this.getSplitItems(),n=this.getIndexPropertyName(e);s.forEach((e,t)=>{e.style.setProperty(n,t)}),this.isSplitting=!1}catch(e){this.isSplitting=!1}}splitRichText(){try{const e=this.dataset.splitType||this.$text.dataset.splitType||"lines",t=this.dataset.splitMask||this.$text.dataset.splitMask||e;this.richTextSplitInstances.forEach(e=>{e&&e.revert()}),this.richTextSplitInstances=[],this.richTextElements.forEach(i=>{const s=this.prepareSemanticTag(i),n=a.create(s,{type:e,tag:"span",linesClass:"split-line",wordsClass:"split-word",charsClass:"split-char",mask:t,autoSplit:!1});this.richTextSplitInstances.push(n),i.__splitInstance=n});const i=this.getSplitItems(),s=this.getIndexPropertyName(e);i.forEach((e,t)=>{e.style.setProperty(s,t)}),this.isSplitting=!1}catch(e){this.isSplitting=!1}}getIndexPropertyName(e){return e.includes(",")?`--${e.split(",")[0].slice(0,-1)}-index`:`--${e.slice(0,-1)}-index`}reSplit(){this.isSplitting||(this.isSplitting=!0,this.resetSplit(),requestAnimationFrame(()=>{this.split()}))}resetSplit(){if(this.isRichText)this.richTextSplitInstances.forEach(e=>{e&&e.revert()}),this.richTextSplitInstances=[],this.richTextElements.forEach(e=>{delete e.__splitInstance;const t=e.querySelector("[data-split-wrapper]");t&&(e.innerHTML=t.innerHTML)});else if(this.splitInstance&&(this.splitInstance.revert(),this.splitInstance=null),this.$text){const e=this.$text.querySelector("[data-split-wrapper]");e&&(this.$text.innerHTML=e.innerHTML)}}getSplitItems(){if(this.isRichText){const e=[],t=this.dataset.splitType||this.$text.dataset.splitType||"words",i=t.includes(",")?t.split(",")[0]:t;return this.richTextSplitInstances.forEach(t=>{t&&t[i]&&e.push(...t[i])}),e}if(!this.splitInstance)return[];const e=this.dataset.splitType||this.$text.dataset.splitType||"words";if(e.includes(",")){const t=e.split(",")[0];return this.splitInstance[t]||[]}return this.splitInstance[e]||[]}getItems(){return this.getSplitItems()}getWords(){return this.getSplitItems()}animateIn(e=.8,t=.05){const i=this.getItems();if(!i.length)return;const a=(this.dataset.splitType||this.$text.dataset.splitType||"words").includes("lines")?{yPercent:100,opacity:0}:{opacity:0,y:20};return s.fromTo(i,a,{yPercent:0,y:0,opacity:1,duration:e,stagger:t,ease:"power2.out"})}animateOut(e=.6,t=.03){const i=this.getItems();if(!i.length)return;const a=(this.dataset.splitType||this.$text.dataset.splitType||"words").includes("lines")?{yPercent:-100,opacity:0}:{y:-10,opacity:0};return s.to(i,{...a,duration:e,stagger:t,ease:"power2.in"})}}class z{constructor(e={}){this.dbName=e.dbName||"SequenceImageCache",this.storeName="images",this.metaStoreName="metadata",this.db=null,this.version=e.version||"1.0.0",this.maxAge=e.maxAge||6048e5,this.chunkSize=e.chunkSize||5,this.corsMode=e.corsMode||"cors",this.crossOrigin=e.crossOrigin||"anonymous",this.maxMemoryImages=e.maxMemoryImages||30,this.imageMemoryMap=new Map,this.compressionQuality=e.compressionQuality||.85,this.useWebP=!1!==e.useWebP,this.isLowMemory=!1,this.checkMemoryInterval=null,this.activeBlobUrls=new Set}async init(){return this.startMemoryMonitoring(),new Promise((e,t)=>{const i=indexedDB.open(this.dbName,3);i.onupgradeneeded=e=>{const t=e.target.result;if(e.oldVersion<3&&(t.objectStoreNames.contains(this.storeName)&&t.deleteObjectStore(this.storeName),t.objectStoreNames.contains(this.metaStoreName)&&t.deleteObjectStore(this.metaStoreName)),!t.objectStoreNames.contains(this.storeName)){const e=t.createObjectStore(this.storeName,{keyPath:"id",autoIncrement:!1});e.createIndex("url","url",{unique:!1}),e.createIndex("sequenceId","sequenceId",{unique:!1}),e.createIndex("frameNumber","frameNumber",{unique:!1}),e.createIndex("timestamp","timestamp",{unique:!1})}t.objectStoreNames.contains(this.metaStoreName)||t.createObjectStore(this.metaStoreName,{keyPath:"sequenceId"})},i.onsuccess=t=>{this.db=t.target.result,this.startPeriodicCleanup(),e(this.db)},i.onerror=e=>{t(e.target.error)}})}startMemoryMonitoring(){"storage"in navigator&&"estimate"in navigator.storage&&(this.checkMemoryInterval=setInterval(async()=>{try{const e=await navigator.storage.estimate(),t=e.usage/e.quota*100;this.isLowMemory=t>80,this.isLowMemory&&(this.maxMemoryImages=Math.floor(this.maxMemoryImages/2))}catch(e){}},3e4))}startPeriodicCleanup(){setInterval(()=>{this.pruneExpiredCache()},6e4)}async getSequenceMetadata(e){return this.db||await this.init(),new Promise((t,i)=>{try{const i=this.db.transaction([this.metaStoreName],"readonly").objectStore(this.metaStoreName).get(e);i.onsuccess=()=>t(i.result),i.onerror=e=>{t(null)}}catch(s){t(null)}})}async saveSequenceMetadata(e,t){return this.db||await this.init(),new Promise((i,s)=>{try{const s=this.db.transaction([this.metaStoreName],"readwrite").objectStore(this.metaStoreName),a={sequenceId:e,version:this.version,timestamp:Date.now(),...t},n=s.put(a);n.onsuccess=()=>i(),n.onerror=e=>{i()}}catch(a){i()}})}generateCacheKey(e,t,i){return`${t}_${i}_${e.split("/").pop()}`}async getCachedImage(e,t,i){this.db||await this.init();const s=this.generateCacheKey(e,t,i);return this.imageMemoryMap.has(s)?this.imageMemoryMap.get(s):new Promise((e,t)=>{try{const t=this.db.transaction([this.storeName],"readonly").objectStore(this.storeName).get(s);t.onsuccess=async()=>{const i=t.result;if(i&&this.isValidCache(i)){let t=i.blob;i.compressed&&(t=await this.decompressImage(t,i.originalType)),this.addToMemoryCache(s,t),e(t)}else e(null)},t.onerror=()=>e(null)}catch(i){e(null)}})}async compressImage(e,t=this.compressionQuality){return e.size<5e4||this.isLowMemory?{blob:e,compressed:!1,originalType:e.type}:new Promise(i=>{const s=new Image,a=URL.createObjectURL(e);s.onload=()=>{const n=document.createElement("canvas"),r=n.getContext("2d");n.width=s.width,n.height=s.height,r.drawImage(s,0,0),n.toBlob(t=>{URL.revokeObjectURL(a),t&&t.size<e.size?i({blob:t,compressed:!0,originalType:e.type}):i({blob:e,compressed:!1,originalType:e.type})},this.useWebP?"image/webp":"image/jpeg",t)},s.onerror=()=>{URL.revokeObjectURL(a),i({blob:e,compressed:!1,originalType:e.type})},s.src=a})}async decompressImage(e,t){return t&&t!==e.type?new Promise(i=>{const s=new Image,a=URL.createObjectURL(e);s.onload=()=>{const n=document.createElement("canvas");n.width=s.width,n.height=s.height,n.getContext("2d").drawImage(s,0,0),n.toBlob(t=>{URL.revokeObjectURL(a),i(t||e)},t,1)},s.onerror=()=>{URL.revokeObjectURL(a),i(e)},s.src=a}):e}addToMemoryCache(e,t){if(this.imageMemoryMap.size>=this.maxMemoryImages){const e=this.imageMemoryMap.keys().next().value;this.imageMemoryMap.get(e),this.imageMemoryMap.delete(e)}this.imageMemoryMap.set(e,t)}async saveImage(e,t,i,s){if(this.db||await this.init(),this.isLowMemory)return;const a=this.generateCacheKey(e,i,s),{blob:n,compressed:r,originalType:o}=await this.compressImage(t);return new Promise((t,l)=>{try{const l=this.db.transaction([this.storeName],"readwrite").objectStore(this.storeName),h={id:a,url:e,blob:n,compressed:r,originalType:o,sequenceId:i,frameNumber:s,version:this.version,timestamp:Date.now(),size:n.size},c=l.put(h);c.onsuccess=()=>t(),c.onerror=e=>{t()}}catch(h){t()}})}async loadImageWithCache(e,t,i){try{const s=await this.getCachedImage(e,t,i);if(s){const a=URL.createObjectURL(s);this.activeBlobUrls.add(a);const n=new Image;return n.crossOrigin=this.crossOrigin,new Promise(s=>{n.onload=()=>{s({img:n,fromCache:!0,blobUrl:a})},n.onerror=async()=>{this.cleanupBlobUrl(a);const n=await this.fetchAndCacheImage(e,t,i);s(n)},n.src=a})}return await this.fetchAndCacheImage(e,t,i)}catch(s){return this.loadImageDirect(e)}}async fetchAndCacheImage(e,t,i){return new Promise(async s=>{try{const a=new AbortController,n=setTimeout(()=>a.abort(),1e4),r=await fetch(e,{mode:this.corsMode,credentials:"same-origin",cache:"default",signal:a.signal});if(clearTimeout(n),!r.ok)throw new Error(`HTTP error! status: ${r.status}`);const o=await r.blob();this.saveImage(e,o,t,i).catch(console.warn);const l=URL.createObjectURL(o);this.activeBlobUrls.add(l);const h=new Image;h.crossOrigin=this.crossOrigin,h.onload=()=>{s({img:h,fromCache:!1,blobUrl:l})},h.onerror=()=>{this.cleanupBlobUrl(l),s(this.loadImageDirect(e))},h.src=l}catch(a){"AbortError"===a.name||"TypeError"===a.name&&a.message.includes("CORS"),s(this.loadImageDirect(e))}})}async loadImageDirect(e){const t=new Image;return t.crossOrigin=this.crossOrigin,new Promise(i=>{t.onload=()=>i({img:t,fromCache:!1,blobUrl:null}),t.onerror=()=>{i({img:null,fromCache:!1,blobUrl:null})},t.src=e})}cleanupBlobUrl(e){e&&this.activeBlobUrls.has(e)&&(URL.revokeObjectURL(e),this.activeBlobUrls.delete(e))}cleanupAllBlobUrls(){for(const e of this.activeBlobUrls)URL.revokeObjectURL(e);this.activeBlobUrls.clear()}async loadSequenceImages(e,t,i){const s=new Array(e.length);let a=0;const n=await this.getSequenceMetadata(t);n&&n.version!==this.version&&await this.clearSequenceCache(t),await this.saveSequenceMetadata(t,{frameCount:e.length,lastAccessed:Date.now()});for(let r=0;r<e.length;r+=this.chunkSize){const n=e.slice(r,Math.min(r+this.chunkSize,e.length)).map((n,o)=>{const l=r+o;return this.loadImageWithCache(n,t,l+1).then(t=>(a++,s[l]=t.img,i&&i(a,e.length,t.fromCache,t.img,l),t.img)).catch(t=>(a++,i&&i(a,e.length,!1,null,l),null))});await Promise.all(n)}return s}isValidCache(e){return e.version===this.version&&!(Date.now()-e.timestamp>this.maxAge)}async clearSequenceCache(e){this.db||await this.init();for(const t of this.imageMemoryMap.keys())t.startsWith(e)&&this.imageMemoryMap.delete(t);return new Promise((t,i)=>{try{const i=this.db.transaction([this.storeName],"readwrite").objectStore(this.storeName),s=i.index("sequenceId").openCursor(IDBKeyRange.only(e));s.onsuccess=e=>{const s=e.target.result;s?(i.delete(s.primaryKey),s.continue()):t()},s.onerror=e=>{t()}}catch(s){t()}})}async clearAllCache(){return this.db||await this.init(),this.imageMemoryMap.clear(),this.cleanupAllBlobUrls(),new Promise((e,t)=>{try{const t=this.db.transaction([this.storeName,this.metaStoreName],"readwrite");t.objectStore(this.storeName).clear(),t.objectStore(this.metaStoreName).clear(),t.oncomplete=()=>e(),t.onerror=t=>{e()}}catch(i){e()}})}async getCacheSize(){if("storage"in navigator&&"estimate"in navigator.storage)try{const e=await navigator.storage.estimate();return{usage:e.usage,quota:e.quota,percentUsed:(e.usage/e.quota*100).toFixed(2)}}catch(e){return null}return null}async pruneExpiredCache(){if(!this.db)return;const e=Date.now()-this.maxAge;return new Promise((t,i)=>{try{const i=this.db.transaction([this.storeName],"readwrite").objectStore(this.storeName).index("timestamp"),s=IDBKeyRange.upperBound(e),a=i.openCursor(s);let n=0;a.onsuccess=e=>{const i=e.target.result;i?(i.delete(),n++,i.continue()):t(n)},a.onerror=e=>{t(0)}}catch(s){t(0)}})}async pruneOldCaches(e=[]){return this.db||await this.init(),new Promise((t,i)=>{try{const i=this.db.transaction([this.storeName],"readwrite").objectStore(this.storeName).openCursor();let s=0;i.onsuccess=i=>{const a=i.target.result;if(a){const t=a.value;(!this.isValidCache(t)||e.length&&!e.includes(t.sequenceId))&&(a.delete(),s++),a.continue()}else t(s)},i.onerror=e=>{t(0)}}catch(s){t(0)}})}destroy(){this.checkMemoryInterval&&clearInterval(this.checkMemoryInterval),this.cleanupAllBlobUrls(),this.imageMemoryMap.clear(),this.db&&(this.db.close(),this.db=null)}}const U=t({scroll:window.scrollY,limit:0,velocity:0,direction:0,progress:0}),V=document.documentElement;class q{static init(){this.locomotiveScroll=new r({lenisOptions:{orientation:this.orientation,gestureOrientation:this.orientation,autoRaf:!1},autoStart:!1,initCustomTicker:e=>{s.ticker.add(e)},destroyCustomTicker:e=>{s.ticker.remove(e)},scrollCallback({scroll:e,limit:t,velocity:i,direction:s,progress:a}){U.set({scroll:e,limit:t,velocity:i,direction:s,progress:a}),e>20?V.classList.contains("has-scrolled")||V.classList.add("has-scrolled"):V.classList.contains("has-scrolled")&&V.classList.remove("has-scrolled")}})}static destroy(){this.locomotiveScroll?.destroy()}static start(){this.locomotiveScroll?.start()}static stop(){this.locomotiveScroll?.stop()}static addScrollElements(e){this.locomotiveScroll?.addScrollElements(e)}static removeScrollElements(e){this.locomotiveScroll?.removeScrollElements(e)}static scrollTo(e,t){this.locomotiveScroll?.scrollTo(e,t)}}s.registerPlugin(o);class Y extends HTMLElement{constructor(){super(),this.frameCount=parseInt(this.getAttribute("data-frame-count"))||219,this.frameStart=parseInt(this.getAttribute("data-frame-start"))||1,this.imageFolder=this.getAttribute("data-image-folder")||"",this.imageFormat=this.getAttribute("data-image-format")||"webp",this.scrollDistance=this.getAttribute("data-scroll-distance")||"500%",this.enableCache="false"!==this.getAttribute("data-enable-cache"),this.cacheVersion=this.getAttribute("data-cache-version")||"1.0.0",this.cacheMaxAge=parseInt(this.getAttribute("data-cache-max-age"))||6048e5,this.scaleTarget=this.getAttribute("data-scale-target")||null,this.scaleStart=parseFloat(this.getAttribute("data-scale-start"))||0,this.scaleEnd=parseFloat(this.getAttribute("data-scale-end"))||.7,this.scalePeak=this.getAttribute("data-scale-peak")?parseFloat(this.getAttribute("data-scale-peak")):.2,this.scaleFromX=0,this.scaleFromY=0,this.scaleToX=0,this.scaleToY=0,this.snapPoints=this.getAttribute("data-snap-points")?JSON.parse(this.getAttribute("data-snap-points")):[0,.45,.8],this.bufferSize=parseInt(this.getAttribute("data-buffer-size"))||30,this.preloadAhead=parseInt(this.getAttribute("data-preload-ahead"))||10,this.imageMap=new Map,this.loadingQueue=new Set,this.lastCleanupFrame=0,this.imagesLoaded=0,this.cachedImagesLoaded=0,this.currentFrame=0,this.targetFrame=0,this.scrollTrigger=null,this.scaleTween=null,this.isCleaningUp=!1,this.resizeObserver=null,this.showLoadingAnimation=!1,this.isInitialized=!1,this.frameUpdatePending=null,this.$canvas=null,this.$loading=null,this.$loadingBar=null,this.$loadingText=null,this.$loadingMask=null,this.$scaleElement=null,this.$cacheStatus=null,this.ctx=null,this.onResize=this.debounce(this.onResize.bind(this),250),this.onSmallScreenChange=this.onSmallScreenChange.bind(this),this.handleCanvasResize=this.handleCanvasResize.bind(this),this.enableCache&&(this.imageCache=new z({dbName:"SequenceCanvasCache",version:this.cacheVersion,maxAge:this.cacheMaxAge,chunkSize:Math.ceil(this.frameCount/40),corsMode:"cors",crossOrigin:"anonymous"}))}debounce(e,t){let i;return function(...s){clearTimeout(i),i=setTimeout(()=>{clearTimeout(i),e(...s)},t)}}throttle(e,t){let i;return function(...s){i||(e.apply(this,s),i=!0,setTimeout(()=>i=!1,t))}}connectedCallback(){window.innerWidth<=479||(this.updateScaleValues(),this.bindEvents(),this.initElements(),this.setupResizeObserver(),this.startProgressiveLoading())}disconnectedCallback(){this.unbindEvents(),this.isCleaningUp||this.cleanup(),this.resizeObserver&&this.resizeObserver.disconnect()}bindEvents(){this.unbindScreenListener=b.subscribe(this.onResize),this.unbindDeviceListener=n(E,["isSmall"],this.onSmallScreenChange)}unbindEvents(){this.unbindScreenListener?.(),this.unbindDeviceListener?.()}onSmallScreenChange(e){window.innerWidth<=479?this.isInitialized&&this.cleanup():(this.updateScaleValues(),this.isInitialized&&(this.handleCanvasResize(),this.$scaleElement&&this.scaleTween&&this.reinitScaleAnimation(),o.refresh()))}onResize(){window.innerWidth<=479||(this.updateScaleValues(),this.$scaleElement&&this.scaleTween&&this.isInitialized&&this.reinitScaleAnimation())}updateScaleValues(){const e=getComputedStyle(document.documentElement),t=parseFloat(e.getPropertyValue("--vw"))||14.4,i=parseFloat(e.getPropertyValue("--vh"))||8;this.viewportWidth=window.innerWidth,this.viewportHeight=window.innerHeight;const s=this.hasAttribute("data-scale-from-x"),a=this.hasAttribute("data-scale-from-y");this.scaleFromX=s?parseFloat(this.getAttribute("data-scale-from-x")):.93*t,this.scaleFromY=a?parseFloat(this.getAttribute("data-scale-from-y")):.9*i,this.scaleToX=this.hasAttribute("data-scale-to-x")?parseFloat(this.getAttribute("data-scale-to-x")):2*this.scaleFromX,this.scaleToY=this.hasAttribute("data-scale-to-y")?parseFloat(this.getAttribute("data-scale-to-y")):2*this.scaleFromY}reinitScaleAnimation(){if(!this.$scaleElement||!this.scaleTween)return;const e=this.scaleTween.progress();this.scaleTween.kill(),this.scaleTween=null,this.clipPathOffsetX=this.viewportWidth/2-50,this.clipPathOffsetY=this.viewportHeight/2-50,this.transformOrigin="50px 50px",s.set(this.$scaleElement,{scaleX:this.scaleFromX,scaleY:this.scaleFromY,transformOrigin:this.transformOrigin,x:this.clipPathOffsetX,y:this.clipPathOffsetY}),this.initScaleAnimation(),this.scaleTween&&this.scaleTween.progress(e)}setupResizeObserver(){if(!this.$canvas)return;let e;this.resizeObserver=new ResizeObserver(t=>{clearTimeout(e),e=setTimeout(()=>{for(const e of t)this.handleCanvasResize()},100)}),this.resizeObserver.observe(this.$canvas)}handleCanvasResize(){if(!this.$canvas||!this.ctx)return;const e=window.innerWidth,t=window.innerHeight;if((this.$canvas.width!==e||this.$canvas.height!==t)&&(this.$canvas.width=e,this.$canvas.height=t,this.$canvas.style.width="100%",this.$canvas.style.height="100%",this.imageMap.has(this.currentFrame)))try{this.drawImageToCanvas(this.imageMap.get(this.currentFrame))}catch(i){}}drawImageToCanvas(e){if(e&&this.ctx)try{const t=this.$canvas.width,i=this.$canvas.height;this.ctx.clearRect(0,0,t,i);const s=e.width/e.height;let a,n,r,o;s>t/i?(n=i,a=n*s,r=(t-a)/2,o=0):(a=t,n=a/s,r=0,o=(i-n)/2),this.ctx.drawImage(e,r,o,a,n)}catch(t){}}initElements(){if(s.set(this,{height:this.scrollDistance}),this.$canvas=this.querySelector("canvas")||this.createCanvas(),this.ctx=this.$canvas.getContext("2d",{alpha:!0,desynchronized:!0}),this.handleCanvasResize(),this.$loading=this.querySelector("[data-loading]"),this.$loadingBar=this.querySelector("[data-loading-bar]"),this.$loadingText=this.querySelector("[data-loading-text]"),this.$loadingMask=this.querySelector("[data-loading-mask]"),this.$cacheStatus=this.querySelector("[data-cache-status]"),this.scaleTarget){const e="house";this.$scaleElement=document.querySelector(`#${e}`);const t=this.$canvas.parentElement;t&&(t.style.clipPath=`url(#${e})`);const i=this.viewportWidth/2-50,a=this.viewportHeight/2-50,n="50px 50px";s.set(this.$scaleElement,{scaleX:this.scaleFromX,scaleY:this.scaleFromY,transformOrigin:n,x:i,y:a}),this.clipPathOffsetX=i,this.clipPathOffsetY=a,this.transformOrigin=n}}createCanvas(){let e=this.querySelector("[data-pin-target]");e||(e=document.createElement("div"),e.setAttribute("data-pin-target",""),e.className="sequence-canvas-wrapper",this.appendChild(e));const t=document.createElement("canvas");return t.id="sequenceCanvas",t.setAttribute("data-canvas",""),e.appendChild(t),t}getImageUrl(e){const t=String(e).padStart(4,"0");return`${this.imageFolder}${t}.${this.imageFormat}`}getSequenceId(){return`${this.imageFolder}_${this.frameCount}_${this.cacheVersion}`}async startProgressiveLoading(){const e=Math.min(5,this.frameCount),t=[];for(let i=0;i<e;i++)t.push(this.getImageUrl(i+this.frameStart));this.showLoadingAnimation=!0,await this.loadImageBatch(t,0),this.imageMap.has(0)&&this.updateFrame(0),this.hideLoadingUI(),q.start(),this.isInitialized=!0,document.documentElement.classList.add(M.SEQUENCE_LOADED),this.initScrollTrigger(),this.$scaleElement&&this.initScaleAnimation(),this.loadRemainingFrames()}async loadImageBatch(e,t){const i=e.map(async(e,i)=>{const s=t+i;if(!this.imageMap.has(s)&&!this.loadingQueue.has(s)){this.loadingQueue.add(s);try{let t;if(this.enableCache&&this.imageCache)t=await this.imageCache.loadImageWithCache(e,this.getSequenceId(),s+1),t.fromCache&&this.cachedImagesLoaded++;else{const i=new Image;i.crossOrigin="anonymous",await new Promise((t,s)=>{i.onload=t,i.onerror=s,i.src=e}),t={img:i,fromCache:!1}}t.img&&(this.imageMap.set(s,t.img),this.imagesLoaded++,this.updateLoadingProgress())}catch(a){}finally{this.loadingQueue.delete(s)}}});await Promise.all(i)}async loadRemainingFrames(){const e=async e=>{const t=Math.max(0,e-this.bufferSize),i=Math.min(this.frameCount-1,e+this.bufferSize),s=[],a=[];for(let n=t;n<=i;n++)this.imageMap.has(n)||this.loadingQueue.has(n)||(s.push(this.getImageUrl(n+this.frameStart)),a.push(n));if(s.length>0){const e=5;for(let t=0;t<s.length;t+=e){const i=s.slice(t,t+e),n=a.slice(t,t+e);await this.loadImageBatch(i,n[0])}}};if(await e(0),this.scrollTrigger){const t=()=>{const t=this.scrollTrigger.progress||0,i=Math.floor(t*(this.frameCount-1));e(i)};this.loadInterval=setInterval(t,500)}}updateLoadingProgress(){const e=this.imagesLoaded/this.frameCount*100;if(this.$loadingBar&&(this.$loadingBar.style.width=`${e}%`),this.$loadingText&&(this.$loadingText.textContent=`Loading: ${Math.round(e)}%`),this.$cacheStatus&&this.enableCache){const e=this.imagesLoaded>0?Math.round(this.cachedImagesLoaded/this.imagesLoaded*100):0;this.$cacheStatus.textContent=`Cache: ${e}% hit rate`}}hideLoadingUI(){this.$loading&&this.showLoadingAnimation?s.to(this.$loading,{opacity:0,duration:.4,ease:"power2.out",onComplete:()=>{this.$loading.classList.add("hidden")}}):this.$loading&&this.$loading.classList.add("hidden")}initScaleAnimation(){this.$scaleElement&&(null!==this.scalePeak?this.scaleTween=s.timeline({paused:!0}).to(this.$scaleElement,{scaleX:this.scaleToX,scaleY:this.scaleToY,transformOrigin:this.transformOrigin,x:this.clipPathOffsetX,y:this.clipPathOffsetY,ease:"power2.inOut"}).to(this.$scaleElement,{scaleX:this.scaleFromX,scaleY:this.scaleFromY,transformOrigin:this.transformOrigin,x:this.clipPathOffsetX,y:this.clipPathOffsetY,ease:"power2.inOut"}):this.scaleTween=s.timeline({paused:!0}).to(this.$scaleElement,{scaleX:this.scaleToX,scaleY:this.scaleToY,transformOrigin:this.transformOrigin,x:this.clipPathOffsetX,y:this.clipPathOffsetY,ease:"power2.inOut"}))}updateScaleProgress(e){if(!this.scaleTween)return;let t=0;t=null!==this.scalePeak?e<=this.scaleStart?0:e<=this.scalePeak?(e-this.scaleStart)/(this.scalePeak-this.scaleStart)*.5:e<=this.scaleEnd?.5+(e-this.scalePeak)/(this.scaleEnd-this.scalePeak)*.5:1:e<this.scaleStart?0:e>this.scaleEnd?1:(e-this.scaleStart)/(this.scaleEnd-this.scaleStart),this.scaleTween.progress(t)}initScrollTrigger(){this.scrollTrigger=o.create({trigger:this,start:"top top",end:"bottom 0%",scrub:!0,invalidateOnRefresh:!0,onUpdate:e=>{const t=Math.floor(e.progress*(this.frameCount-1));this.targetFrame=t;const i=Math.min(this.frameCount-1,t+this.preloadAhead);for(let s=t;s<=i;s++)this.imageMap.has(s)||this.loadingQueue.has(s)||this.loadImageBatch([this.getImageUrl(s+this.frameStart)],s);this.updateFrame(t),this.updateScaleProgress(e.progress),e.progress>.8?s.set(this,{zIndex:998}):s.set(this,{zIndex:999})},fastScrollEnd:!0,preventOverlaps:!0,onRefresh:()=>{this.imageMap.has(this.currentFrame)&&this.drawImageToCanvas(this.imageMap.get(this.currentFrame))}})}updateFrame(e){if(!(e!==this.currentFrame&&this.imageMap.has(e)||this.imageMap.has(e))){for(let t=1;t<=5;t++){if(this.imageMap.has(e-t)){e-=t;break}if(this.imageMap.has(e+t)){e+=t;break}}if(!this.imageMap.has(e))return}this.currentFrame=e,this.frameUpdatePending&&cancelAnimationFrame(this.frameUpdatePending),this.frameUpdatePending=requestAnimationFrame(()=>{try{const t=this.imageMap.get(e);t&&this.drawImageToCanvas(t),this.frameUpdatePending=null}catch(t){this.frameUpdatePending=null}})}cleanup(){if(!this.isCleaningUp){if(this.isCleaningUp=!0,this.loadInterval&&(clearInterval(this.loadInterval),this.loadInterval=null),this.frameUpdatePending&&(cancelAnimationFrame(this.frameUpdatePending),this.frameUpdatePending=null),this.scrollTrigger)try{this.scrollTrigger.kill(!0),this.scrollTrigger=null}catch(e){}this.scaleTween&&(this.scaleTween.kill(),this.scaleTween=null),this.resizeObserver&&(this.resizeObserver.disconnect(),this.resizeObserver=null);for(const[e,t]of this.imageMap)t.src&&t.src.startsWith("blob:")&&URL.revokeObjectURL(t.src);this.imageMap.clear(),this.loadingQueue.clear(),this.imagesLoaded=0,this.cachedImagesLoaded=0,this.currentFrame=0,this.isInitialized=!1,this.isCleaningUp=!1}}getProgress(){return this.scrollTrigger?.progress||0}getCurrentFrame(){return this.currentFrame}getTotalFrames(){return this.frameCount}isLoaded(){return this.imagesLoaded>=Math.min(2*this.bufferSize,this.frameCount)}getCacheStats(){return{enabled:this.enableCache,cachedFrames:this.cachedImagesLoaded,loadedFrames:this.imagesLoaded,totalFrames:this.frameCount,cacheHitRate:this.imagesLoaded>0?Math.round(this.cachedImagesLoaded/this.imagesLoaded*100):0,memoryFrames:this.imageMap.size}}async clearCache(){if(this.imageCache){const e=this.getSequenceId();await this.imageCache.clearSequenceCache(e),this.cachedImagesLoaded=0,this.$cacheStatus&&(this.$cacheStatus.textContent="Cache cleared")}}async getCacheSize(){return this.imageCache?await this.imageCache.getCacheSize():null}async pruneOldCaches(){if(this.imageCache){const e=this.getSequenceId();return await this.imageCache.pruneOldCaches([e])}return 0}refresh(){o.refresh()}}s.registerPlugin(o);class H extends F{static ANIM_TYPES={HIGH_LINES:"high-lines",FADE_IN:"fade-in",SLIDE_UP:"slide-up",COLOR_FILL:"color-fill"};constructor(){super(),this.animationTimeline=null,this.scrollTriggerInstance=null,this.animationType=null,this.animationConfig={},this.isAnimating=!1}async connectedCallback(){this.animationType=this.getAttribute("data-anim"),this.animationType&&this.parseAnimationConfig(),await super.connectedCallback()}disconnectedCallback(){this.cleanupAnimation(),super.disconnectedCallback()}parseAnimationConfig(){const e=this.getAttribute("data-anim-config")||"",t={[H.ANIM_TYPES.HIGH_LINES]:{direction:"right",color:"lime",delay:0,textRevealDuration:.6,highlightRevealDuration:.6,staggerDelay:.15},[H.ANIM_TYPES.FADE_IN]:{duration:.8,stagger:.05,delay:0},[H.ANIM_TYPES.SLIDE_UP]:{duration:.8,stagger:.05,delay:0,distance:50},[H.ANIM_TYPES.COLOR_FILL]:{initialColor:"rgba(0,0,0, .3)",start:"top 70%",end:"top 30%",scrub:1,markers:!1,stagger:.06}};this.animationConfig={...t[this.animationType]},e&&e.split(",").map(e=>e.trim()).forEach(e=>{const[t,i]=e.split(":").map(e=>e.trim());t&&void 0!==i&&(this.animationConfig[t]=isNaN(i)?i:parseFloat(i))})}split(){super.split(),this.animationType&&setTimeout(()=>{this.animationTimeline&&this.cleanupAnimation(),this.initAnimation()},0)}initAnimation(){const e=this.closest("[data-hero-animation-container]");switch(this.animationType){case H.ANIM_TYPES.HIGH_LINES:this.setupHighLines();break;case H.ANIM_TYPES.FADE_IN:this.setupFadeIn();break;case H.ANIM_TYPES.SLIDE_UP:this.setupSlideUp();break;case H.ANIM_TYPES.COLOR_FILL:this.setupColorFill();break;default:return}!e&&this.animationTimeline&&this.animationType!==H.ANIM_TYPES.COLOR_FILL?this.scrollTriggerInstance=o.create({trigger:this,start:"top 90%",once:!0,onEnter:()=>this.play()}):e&&this.animationType!==H.ANIM_TYPES.COLOR_FILL&&this.play()}getAllLines(){if(this.isRichText&&this.richTextSplitInstances.length){const e=[];return this.richTextSplitInstances.forEach(t=>{t&&t.lines&&e.push(...t.lines)}),e}return this.splitInstance?.lines||[]}getItemsByType(e){if(this.isRichText&&this.richTextSplitInstances.length){const t=[];return this.richTextSplitInstances.forEach(i=>{i&&i[e]&&t.push(...i[e])}),t}return this.splitInstance?.[e]||[]}setupHighLines(){const{direction:e,color:t,delay:i,textRevealDuration:a,highlightRevealDuration:n,staggerDelay:r}=this.animationConfig,o={accent:"var(--_color---neutral--black, #221d19)",lime:"var(--color--lime, #d2ff00)","lime-off":"var(--color--lime-off, #b2c73a)","dark-green":"var(--color--dark-green, #282c20)","dark-green-tint-1":"var(--color--dark-green-tint-1, #3b3c38)",black:"var(--color--black, #111112)",white:"var(--color--white, #f4f4ed)"},l=o[t]||o.lime,h=this.getAllLines();h.length&&(this.animationTimeline=s.timeline({paused:!0,delay:i/1e3}),h.forEach((t,i)=>{t.style.position="relative";const o="right"===e?"inset(0 100% 0 0)":"inset(0 0 0 100%)";s.set(t,{clipPath:o,autoAlpha:1});const h=document.createElement("div");h.className="high-line-reveal",h.style.position="absolute",h.style.top="0",h.style.left="0",h.style.width="100%",h.style.height="100%",h.style.backgroundColor=l,h.style.borderRadius=".2em ",h.style.transformOrigin="right"===e?"right center":"left center",h.style.zIndex="5",t.appendChild(h),s.set(h,{scaleX:1});const c=i*r,m="right"===e?"inset(0 0% 0 0)":"inset(0 0 0 0%)";this.animationTimeline.to(t,{clipPath:m,duration:a,ease:"power2.out"},c),this.animationTimeline.to(h,{scaleX:0,duration:n,ease:"power2.inOut"},c+a/2)}))}setupFadeIn(){const{duration:e,stagger:t,delay:i}=this.animationConfig,a=this.getItems();a.length&&(this.animationTimeline=s.timeline({paused:!0,delay:i/1e3}),this.animationTimeline.fromTo(a,{opacity:0},{opacity:1,duration:e,stagger:t,ease:"power2.out"}))}setupSlideUp(){const{duration:e,stagger:t,delay:i,distance:a}=this.animationConfig,n=this.getItems();n.length&&(this.animationTimeline=s.timeline({paused:!0,delay:i/1e3}),this.animationTimeline.fromTo(n,{opacity:0,yPercent:a},{opacity:1,yPercent:0,duration:e,stagger:t,ease:"power2.out"}))}setupColorFill(){const{initialColor:e,start:t,end:i,scrub:a,markers:n,stagger:r}=this.animationConfig,l=window.getComputedStyle(this).color,h=this.getItemsByType("chars");h.length&&(s.set(h,{color:e}),this.animationTimeline=s.timeline({paused:!0}),this.animationTimeline.to(h,{color:l,stagger:r,ease:"none",duration:.1}),this.scrollTriggerInstance=o.create({trigger:this,start:t,end:i,markers:n,scrub:a,animation:this.animationTimeline}))}cleanupAnimation(){this.animationTimeline&&(this.animationTimeline.kill(),this.animationTimeline=null),this.scrollTriggerInstance&&(this.scrollTriggerInstance.kill(),this.scrollTriggerInstance=null),this.querySelectorAll(".high-line-reveal").forEach(e=>e.remove())}play(){return this.animationTimeline?(this.isAnimating=!0,this.animationTimeline.play()):null}pause(){return this.animationTimeline?(this.isAnimating=!1,this.animationTimeline.pause()):null}restart(){return this.animationTimeline?(this.isAnimating=!0,this.animationTimeline.restart()):null}reverse(){return this.animationTimeline?this.animationTimeline.reverse():null}seek(e){return this.animationTimeline?this.animationTimeline.seek(e):null}getProgress(){return this.animationTimeline?.progress()||0}setProgress(e){return this.animationTimeline?this.animationTimeline.progress(e):null}animateHighLines(e={}){return this.animationConfig={...this.animationConfig,...e},this.cleanupAnimation(),this.setupHighLines(),this.play()}animateFadeIn(e={}){return this.animationConfig={...this.animationConfig,...e},this.cleanupAnimation(),this.setupFadeIn(),this.play()}animateSlideUp(e={}){return this.animationConfig={...this.animationConfig,...e},this.cleanupAnimation(),this.setupSlideUp(),this.play()}animateColorFill(e={}){return this.animationConfig={...this.animationConfig,...e},this.cleanupAnimation(),this.setupColorFill(),this.scrollTriggerInstance}}s.registerPlugin(o);class B extends HTMLElement{constructor(){super(),this.$pathDesktop=null,this.$svgDesktop=null,this.$imageDesktop=null,this.$pathMobile=null,this.$svgMobile=null,this.$imageMobile=null,this.$activePath=null,this.$activeSvg=null,this.$activeImage=null,this.$activeClipId=null,this.scrollTriggerInstance=null,this.animationInstance=null,this.isMobile=!1,this.isInitialized=!1}connectedCallback(){this.$svgDesktop=this.querySelector(".clip-svg:not(.clip-svg-mobile)"),this.$svgMobile=this.querySelector(".clip-svg-mobile"),(this.$svgDesktop||this.$svgMobile)&&(this.$svgDesktop&&(this.$pathDesktop=this.$svgDesktop.querySelector("[data-morph-path]")),this.$svgMobile&&(this.$pathMobile=this.$svgMobile.querySelector("[data-morph-path]")),(this.$pathDesktop||this.$pathMobile)&&(this.bindEvents(),this.updateActiveElements(),this.setupClipPath(),this.setupImageResponsive(),this.setupMorph(),this.isInitialized=!0))}disconnectedCallback(){this.unbindEvents(),this.destroy(),this.isInitialized=!1}bindEvents(){this.unbindScreenListener=b.subscribe(()=>this.refresh()),this.unbindDeviceListener=n(E,["isSmall"],this.onSmallScreenChange)}unbindEvents(){this.unbindScreenListener?.(),this.unbindDeviceListener?.()}updateActiveElements(){const e=parseInt(this.dataset.morphMobileBreakpoint||"768",10),t=window.matchMedia(`(max-width: ${e}px)`);this.isMobile=t.matches,this.isMobile&&this.$svgMobile&&this.$pathMobile?(this.$activeSvg=this.$svgMobile,this.$activePath=this.$pathMobile,this.$activeImage=this.$imageMobile,this.$svgMobile.style.display="block",this.$svgDesktop&&(this.$svgDesktop.style.display="none")):(this.$activeSvg=this.$svgDesktop||this.$svgMobile,this.$activePath=this.$pathDesktop||this.$pathMobile,this.$activeImage=this.$imageDesktop||this.$imageMobile,this.$svgDesktop&&(this.$svgDesktop.style.display="block"),this.$svgMobile&&(this.$svgMobile.style.display="none"));const i=this.dataset.morphImageSelector||"image";this.$activeImage=this.$activeSvg?.querySelector(i)||null}setupClipPath(){if(!this.$activePath||!this.$activeSvg)return;const e=this.dataset.morphClipId,t=this.dataset.morphClipIdDesktop||e,i=this.dataset.morphClipIdMobile||e,s=this.isMobile?i:t;if(!s)return;const a=this.$activeSvg;if(!this.$activePath.id){const e=this.isMobile?"mobile":"desktop";this.$activePath.id=`${s}-path-${e}`}let n=a.querySelector("defs");n||(n=document.createElementNS("http://www.w3.org/2000/svg","defs"),a.insertBefore(n,a.firstChild));let r=n.querySelector(`#${s}`);r||(r=document.createElementNS("http://www.w3.org/2000/svg","clipPath"),r.id=s,n.appendChild(r)),r.setAttribute("clipPathUnits","userSpaceOnUse"),Array.from(r.children).forEach(e=>r.removeChild(e));const o=this.$activePath.cloneNode(!0);o.removeAttribute("data-morph-path"),o.removeAttribute("data-morph-target"),r.appendChild(o),this.$clipPathClone=o,this.$activeClipId=s}setupImageResponsive(){if(!this.$activeImage||!this.$activeSvg)return;const e=this.$activeClipId,t=(this.$activeSvg.getAttribute("viewBox")||"0 0 1340 650").split(" ").map(Number),i=t[2],s=t[3];this.$activeImage.setAttribute("x","0"),this.$activeImage.setAttribute("y","0"),this.$activeImage.setAttribute("width",String(i)),this.$activeImage.setAttribute("height",String(s));const a=this.dataset.morphAspectRatio||"xMidYMid slice";this.$activeImage.setAttribute("preserveAspectRatio",a),e&&this.$activeImage.setAttribute("clip-path",`url(#${e})`)}setupMorph(){if(!this.$activePath)return;const e=this.$activePath.dataset.morphTarget;if(!e)return;const t=this.dataset.morphTrigger||this,i=this.dataset.morphStart||"top center",a=this.dataset.morphEnd||"center center",n=parseFloat(this.dataset.morphScrub)||1,r="true"===this.dataset.morphMarkers,o=this.$clipPathClone?[this.$activePath,this.$clipPathClone]:this.$activePath;this.animationInstance=s.to(o,{attr:{d:e},ease:"none",scrollTrigger:{trigger:t,start:i,end:a,scrub:n,markers:r,onRefresh:()=>this.onRefresh(),onUpdate:e=>this.onUpdate(e)}}),this.scrollTriggerInstance=this.animationInstance.scrollTrigger}onSmallScreenChange=()=>{if(!this.isInitialized)return;const e=this.isMobile;this.updateActiveElements(),e!==this.isMobile?(this.destroy(),this.setupClipPath(),this.setupImageResponsive(),this.setupMorph()):this.refresh()};onRefresh(){}onUpdate(e){}refresh(){this.scrollTriggerInstance?.refresh()}destroy(){this.animationInstance&&(this.animationInstance.kill(),this.animationInstance=null),this.scrollTriggerInstance&&(this.scrollTriggerInstance.kill(),this.scrollTriggerInstance=null),this.$clipPathClone=null}reset(){this.animationInstance?.progress(0)}complete(){this.animationInstance?.progress(1)}getProgress(){return this.animationInstance?.progress()||0}setProgress(e){const t=Math.max(0,Math.min(1,e));this.animationInstance?.progress(t)}isMobileActive(){return this.isMobile}}s.registerPlugin(o);class j extends HTMLElement{static ANIM_TYPES={VERTICAL_REVEAL:"vertical-reveal",HORIZONTAL_REVEAL:"horizontal-reveal",CIRCLE_REVEAL:"circle-reveal",LINE_REVEAL:"line-reveal",RECT_REVEAL:"rect-reveal",FADE_IN:"fade-in",SCALE_IN:"scale-in"};constructor(){super(),this.animationTimeline=null,this.scrollTriggerInstance=null,this.animationType=null,this.animationConfig={},this.isAnimating=!1,this.clones=[],this.originalImage=null,this.imageContainer=null,this.isImageLoaded=!1}async connectedCallback(){this.animationType=this.getAttribute("data-anim"),this.animationType&&(this.parseAnimationConfig(),await this.waitForImageLoad(),this.init())}disconnectedCallback(){this.cleanupAnimation()}parseAnimationConfig(){const e=this.getAttribute("data-anim-config")||"",t={[j.ANIM_TYPES.VERTICAL_REVEAL]:{cloneCount:5,duration:1.2,stagger:.1,delay:0,ease:"power2.inOut"},[j.ANIM_TYPES.HORIZONTAL_REVEAL]:{cloneCount:5,duration:1.2,stagger:.1,delay:0,ease:"power2.inOut"},[j.ANIM_TYPES.CIRCLE_REVEAL]:{cloneCount:8,duration:1.5,stagger:.08,delay:0,ease:"power2.out",sizeMultiplier:.82},[j.ANIM_TYPES.LINE_REVEAL]:{cloneCount:6,angle:15,duration:1.2,stagger:.1,delay:0,ease:"power2.inOut"},[j.ANIM_TYPES.RECT_REVEAL]:{cloneCount:6,duration:1.2,stagger:.08,delay:0,ease:"power2.out"},[j.ANIM_TYPES.FADE_IN]:{duration:1,delay:0,ease:"power2.out"},[j.ANIM_TYPES.SCALE_IN]:{duration:1.2,delay:0,ease:"power2.out",startScale:.8}};this.animationConfig={...t[this.animationType]},e&&e.split(",").map(e=>e.trim()).forEach(e=>{const[t,i]=e.split(":").map(e=>e.trim());t&&void 0!==i&&(this.animationConfig[t]="true"===i||"false"!==i&&(isNaN(i)?i:parseFloat(i)))})}waitForImageLoad(){return new Promise(e=>{if(this.originalImage=this.querySelector("img"),this.originalImage){if(this.originalImage.complete&&0!==this.originalImage.naturalHeight)return this.isImageLoaded=!0,void e();this.originalImage.addEventListener("load",()=>{this.isImageLoaded=!0,e()},{once:!0}),this.originalImage.addEventListener("error",()=>{e()},{once:!0})}else e()})}init(){if(!this.originalImage||!this.isImageLoaded)return;this.prepareContainer(),this.setupAnimation();const e=this.closest("[data-hero-animation-container]");!e&&this.animationTimeline?this.scrollTriggerInstance=o.create({trigger:this,start:"top 90%",once:!0,onEnter:()=>this.play()}):e&&this.animationTimeline&&this.play()}prepareContainer(){this.imageContainer||(this.imageContainer=document.createElement("div"),this.imageContainer.className="animated-image-container",this.imageContainer.style.position="relative",this.imageContainer.style.width="100%",this.imageContainer.style.height="100%",this.imageContainer.style.overflow="hidden",this.originalImage.parentNode.insertBefore(this.imageContainer,this.originalImage),this.imageContainer.appendChild(this.originalImage)),this.originalImage.classList.add("animated-image-original"),this.originalImage.style.position="relative",this.originalImage.style.display="block",this.originalImage.style.width="100%",this.originalImage.style.height="auto"}createClones(e){const t=document.createDocumentFragment();for(let i=0;i<e-1;i++){const e=this.originalImage.cloneNode(!0);e.classList.add("animated-image-clone"),e.style.position="absolute",e.style.top="0",e.style.left="0",e.style.width="100%",e.style.height="100%",e.style.objectFit=this.originalImage.style.objectFit||"cover",this.clones.push(e),t.appendChild(e)}this.imageContainer.appendChild(t)}getAllImages(){return[this.originalImage,...this.clones]}setupAnimation(){switch(this.animationType){case j.ANIM_TYPES.VERTICAL_REVEAL:this.setupVerticalReveal();break;case j.ANIM_TYPES.HORIZONTAL_REVEAL:this.setupHorizontalReveal();break;case j.ANIM_TYPES.CIRCLE_REVEAL:this.setupCircleReveal();break;case j.ANIM_TYPES.LINE_REVEAL:this.setupLineReveal();break;case j.ANIM_TYPES.RECT_REVEAL:this.setupRectReveal();break;case j.ANIM_TYPES.FADE_IN:this.setupFadeIn();break;case j.ANIM_TYPES.SCALE_IN:this.setupScaleIn();break;default:return}}setupVerticalReveal(){const{cloneCount:e,duration:t,stagger:i,delay:a,ease:n}=this.animationConfig;this.createClones(e);const r=this.getAllImages(),o=100/r.length;r.forEach((e,t)=>{const i=o*t,a=100-(i+o+.05);s.set(e,{clipPath:`inset(0% ${a}% 0% ${i}%)`,willChange:"clip-path"})}),this.animationTimeline=s.timeline({paused:!0,delay:a/1e3}),this.animationTimeline.to(r,{clipPath:e=>`inset(0% 0% 0% ${o*e}%)`,duration:t,stagger:i,ease:n})}setupHorizontalReveal(){const{cloneCount:e,duration:t,stagger:i,delay:a,ease:n}=this.animationConfig;this.createClones(e);const r=this.getAllImages(),o=100/r.length;r.forEach((e,t)=>{const i=o*t,a=100-(i+o+.06);s.set(e,{clipPath:`inset(${i}% 0% ${a}%)`,willChange:"clip-path"})}),this.animationTimeline=s.timeline({paused:!0,delay:a/1e3}),this.animationTimeline.to(r,{clipPath:e=>`inset(${o*e}% 0% 0%)`,duration:t,stagger:i,ease:n})}setupCircleReveal(){const{cloneCount:e,duration:t,stagger:i,delay:a,ease:n,sizeMultiplier:r}=this.animationConfig;this.createClones(e);const o=this.getAllImages(),l=100/o.length;o.forEach((e,t)=>{const i=l*t*r;s.set(e,{clipPath:`circle(${i}% at 50% 50%)`,zIndex:o.length-t,willChange:"clip-path"})}),this.animationTimeline=s.timeline({paused:!0,delay:a/1e3}),this.animationTimeline.to(o,{clipPath:"circle(100% at 50% 50%)",duration:t,stagger:i,ease:n})}setupLineReveal(){const{cloneCount:e,angle:t,duration:i,stagger:a,delay:n,ease:r}=this.animationConfig;this.createClones(e);const o=this.getAllImages(),l=(100+t)/100,h=100/o.length*l;o.forEach((e,i)=>{const a=h*i-t,n=a+h+.04,r=h*i,o=r+h+.04;s.set(e,{clipPath:`polygon(${r}% 0%, ${o}% 0%, ${n}% 100%, ${a}% 100%)`,willChange:"clip-path"})}),this.animationTimeline=s.timeline({paused:!0,delay:n/1e3}),this.animationTimeline.to(o,{clipPath:e=>{const t=h*e;return`polygon(${t}% 0%, 100% 0%, 100% 100%, ${t}% 100%)`},duration:i,stagger:a,ease:r})}setupRectReveal(){const{cloneCount:e,duration:t,stagger:i,delay:a,ease:n}=this.animationConfig;this.createClones(e);const r=this.getAllImages(),o=50/r.length;r.forEach((e,t)=>{const i=50-o*t-o;s.set(e,{clipPath:`inset(${i}%)`,zIndex:r.length-t,willChange:"clip-path"})}),this.animationTimeline=s.timeline({paused:!0,delay:a/1e3}),this.animationTimeline.to(r,{clipPath:"inset(0%)",duration:t,stagger:i,ease:n})}setupFadeIn(){const{duration:e,delay:t,ease:i}=this.animationConfig;s.set(this.originalImage,{opacity:0}),this.animationTimeline=s.timeline({paused:!0,delay:t/1e3}),this.animationTimeline.to(this.originalImage,{opacity:1,duration:e,ease:i})}setupScaleIn(){const{duration:e,delay:t,ease:i,startScale:a}=this.animationConfig;s.set(this.originalImage,{opacity:0,scale:a}),this.animationTimeline=s.timeline({paused:!0,delay:t/1e3}),this.animationTimeline.to(this.originalImage,{opacity:1,scale:1,duration:e,ease:i})}cleanupAnimation(){this.animationTimeline&&(this.animationTimeline.kill(),this.animationTimeline=null),this.scrollTriggerInstance&&(this.scrollTriggerInstance.kill(),this.scrollTriggerInstance=null),this.clones.forEach(e=>e.remove()),this.clones=[],this.originalImage&&s.set(this.originalImage,{clearProps:"all"})}play(){return this.animationTimeline?(this.isAnimating=!0,this.animationTimeline.play()):null}pause(){return this.animationTimeline?(this.isAnimating=!1,this.animationTimeline.pause()):null}restart(){return this.animationTimeline?(this.isAnimating=!0,this.animationTimeline.restart()):null}reverse(){return this.animationTimeline?this.animationTimeline.reverse():null}seek(e){return this.animationTimeline?this.animationTimeline.seek(e):null}getProgress(){return this.animationTimeline?.progress()||0}setProgress(e){return this.animationTimeline?this.animationTimeline.progress(e):null}animate(e,t={}){return this.animationType=e,this.animationConfig={...this.animationConfig,...t},this.cleanupAnimation(),this.setupAnimation(),this.play()}animateVerticalReveal(e={}){return this.animate(j.ANIM_TYPES.VERTICAL_REVEAL,e)}animateHorizontalReveal(e={}){return this.animate(j.ANIM_TYPES.HORIZONTAL_REVEAL,e)}animateCircleReveal(e={}){return this.animate(j.ANIM_TYPES.CIRCLE_REVEAL,e)}animateLineReveal(e={}){return this.animate(j.ANIM_TYPES.LINE_REVEAL,e)}animateRectReveal(e={}){return this.animate(j.ANIM_TYPES.RECT_REVEAL,e)}animateFadeIn(e={}){return this.animate(j.ANIM_TYPES.FADE_IN,e)}animateScaleIn(e={}){return this.animate(j.ANIM_TYPES.SCALE_IN,e)}}customElements.get("animated-image")||customElements.define("animated-image",j);const W=({modules:e,updateCallback:t,isPrefersReducedMotion:i=!1})=>(document.documentElement,{modules:e,effect:i?"fade":"slide",loop:!1,slidesPerView:1.1,spaceBetween:20,breakpoints:{700:{slidesPerView:1.1,spaceBetween:20},1e3:{slidesPerView:4}},on:{init:t||(()=>{}),breakpoint:t||(()=>{}),destroy:t||(()=>{})}});class X extends HTMLElement{constructor(e){super(e),this.$swiper=this.querySelector("[data-swiper]"),this.swiper=null,this.type=this.dataset.type}connectedCallback(){this.initSwiper(),o.normalizeScroll(!0)}disconnectedCallback(){this.destroySwiper()}initSwiper(){let e;this.type,e=W;const t=e({modules:void 0,$swiper:this,isPrefersReducedMotion:E.get().isReducedMotion});this.swiper=new l(this,{init:!1,...t}),this.swiper.autoplay?.pause(),this.swiper.init()}destroySwiper(){this.swiper?.destroy(!0,!0)}}const G=[{name:"c-split",class:F,type:"Split"},{name:"c-sequence-canvas",class:Y,type:"SequenceCanvas"},{name:"c-animated-text",class:H,type:"AnimatedText"},{name:"c-morph-shape",class:B,type:"MorphShape"},{name:"c-animated-image",class:j,type:"AnimatedImage"},{name:"c-carousel",class:X,type:"Carousel"}],K={};class Q{constructor(){this.onVisitStartBind=this.onVisitStart.bind(this),this.beforeContentReplaceBind=this.beforeContentReplace.bind(this),this.onContentReplaceBind=this.onContentReplace.bind(this),this.onAnimationInEndBind=this.onAnimationInEnd.bind(this),this.onAnimationOutStartBind=this.onAnimationOutStart.bind(this),this.goTo=this.goTo.bind(this),this.onPageView=this.onPageView.bind(this)}init(){this.initSwup(),this.bindEvents(),requestAnimationFrame(()=>{V.classList.add(M.READY)})}destroy(){this.unbindEvents(),this.swup?.destroy()}bindEvents(){window.addEventListener($.GO_TO,this.goTo),this.swup.hooks.on("visit:start",this.onVisitStartBind),this.swup.hooks.before("content:replace",this.beforeContentReplaceBind),this.swup.hooks.on("content:replace",this.onContentReplaceBind),this.swup.hooks.on("animation:in:end",this.onAnimationInEndBind),this.swup.hooks.on("animation:out:start",this.onAnimationOutStartBind),this.swup.hooks.on("page:view",this.onPageView),this.swup.hooks.on("fetch:error",e=>{}),this.swup.hooks.on("fetch:timeout",e=>{})}unbindEvents(){window.removeEventListener($.GO_TO,this.goTo)}initSwup(){this.swup=new h({animateHistoryBrowsing:!0,linkToSelf:"navigate",ignoreVisit:(e,{el:t,event:i}={})=>-1!=e.lastIndexOf("#show-cookie-consent")||t?.closest("[data-no-swup]"),plugins:this._getSwupPlugins()})}updateDocumentAttributes(e){const t=(new DOMParser).parseFromString(e.to.html,"text/html"),i={...t.querySelector("html")?.dataset};Object.entries(i).forEach(([e,t])=>{var i;V.setAttribute(`data-${i=e,i.split(/(?=[A-Z])/).join("-").toLowerCase()}`,t??"")})}_getSwupPlugins(){return[new c({preloadHoveredLinks:!0}),new m({announcements:{"en-US":{visit:"Navigated to: {title}",url:"New page at {url}"},"de-DE":{visit:"Navigiert zu: {title}",url:"Neue Seite unter {url}"},"fr-FR":{visit:"Navigué vers : {title}",url:"Nouvelle page à {url}"},"*":{visit:"{title}",url:"{url}"}}}),new d({offset:120}),new u({routes:[{name:"home",path:"/"},{name:"404",path:"/404"},{name:"any",path:"(.*)"}]})]}goTo(e){this.swup.navigate(e.detail)}onVisitStart(e){if(e.fragmentVisit||(e.scroll.reset=!1,V.classList.add(M.TRANSITION),V.classList.remove(M.READY)),e.fragmentVisit)switch(e.fragmentVisit.name){case"open-modal":f("Dialog").forEach(e=>{e.open()});break;case"close-modal":f("Dialog").forEach(e=>{e.close()});break;case"listing":q.scrollTo("#listing",{offset:-200})}window.dispatchEvent(new CustomEvent($.VISIT_START,{detail:e}))}beforeContentReplace(e){e.fragmentVisit||q?.destroy()}onContentReplace(e){e.fragmentVisit?e.fragmentVisit.name:window.scrollTo(0,0),e.fragmentVisit||(q?.init(),this.updateDocumentAttributes(e))}onAnimationOutStart(e){e.fragmentVisit}onAnimationInEnd(e){e.fragmentVisit||(window.scrollTo(0,0),V.classList.remove(M.TRANSITION),V.classList.add(M.READY))}onPageView(e){const t=e.to.document.querySelector("html").getAttribute("data-wf-page");t&&document.documentElement.setAttribute("data-wf-page",t),window.Webflow.destroy(),window.Webflow.ready()}}class Z{constructor(){this.isInitialized=!1,this.load=null,this.startTime=performance.now()}async initialize(){try{await this.setupGlobals(),this.registerComponents(),this.setupScrolling(),this.setupRouting(),await this.loadFonts(),this.markAsReady(),this.runWelcome(),this.isInitialized=!0,Math.round(performance.now()-this.startTime),this.setupDevHelpers()}catch(e){throw e}}runWelcome(){}async setupGlobals(){try{await async function(){L.IS_DEV&&function(e,t,i){let s=Promise.resolve();if(t&&t.length>0){let e=function(e){return Promise.all(e.map(e=>Promise.resolve(e).then(e=>({status:"fulfilled",value:e}),e=>({status:"rejected",reason:e}))))};const a=document.getElementsByTagName("link"),n=document.querySelector("meta[property=csp-nonce]"),r=n?.nonce||n?.getAttribute("nonce");s=e(t.map(e=>{if(e=function(e,t){return new URL(e,t).href}(e,i),e in K)return;K[e]=!0;const t=e.endsWith(".css"),s=t?'[rel="stylesheet"]':"";if(i)for(let i=a.length-1;i>=0;i--){const s=a[i];if(s.href===e&&(!t||"stylesheet"===s.rel))return}else if(document.querySelector(`link[href="${e}"]${s}`))return;const n=document.createElement("link");return n.rel=t?"stylesheet":"modulepreload",t||(n.as="script"),n.crossOrigin="",n.href=e,r&&n.setAttribute("nonce",r),document.head.appendChild(n),t?new Promise((t,i)=>{n.addEventListener("load",t),n.addEventListener("error",()=>i(new Error(`Unable to preload CSS for ${e}`)))}):void 0}))}function a(e){const t=new Event("vite:preloadError",{cancelable:!0});if(t.payload=e,window.dispatchEvent(t),!t.defaultPrevented)throw e}return s.then(t=>{for(const e of t||[])"rejected"===e.status&&a(e.reason);return e().catch(a)})}(async()=>{const{default:e}=await import("./vendors.js").then(e=>e.h);return{default:e}},[],import.meta.url).then(({default:e})=>{new e({columns:"var(--grid-columns)",gutterWidth:"var(--grid-gutter)",marginWidth:"var(--grid-margin)",opacity:.1,key:"g",breakpoints:{1440:{columns:12}}})}).catch(e=>{}),w.subscribe(()=>{const e=document.documentElement.style,t=.01*document.body.clientWidth;e.setProperty("--vw",`${t.toFixed(2)}px`);const i=.01*window.innerHeight;if(e.setProperty("--vh",`${i.toFixed(2)}px`),L.SUPPORTS_VH)return;const s=.01*document.documentElement.clientHeight;e.setProperty("--svh",`${s}px`);const a=.01*window.innerHeight;if(e.setProperty("--dvh",`${a}px`),document.body){const t=document.createElement("div");t.style.width="1px",t.style.height="100vh",t.style.position="fixed",t.style.left="0",t.style.top="0",t.style.bottom="0",t.style.visibility="hidden",document.body.appendChild(t);var n=t.clientHeight;t.remove();const i=.01*n;e.setProperty("--lvh",`${i}px`)}})}()}catch(e){}}registerComponents(){try{!function(){const e={registered:0,failed:0};G.forEach(({name:t,class:i,type:s})=>{try{customElements.define(t,g(i,s)),e.registered++}catch(a){e.failed++}})}()}catch(e){throw e}}setupScrolling(){try{q.init(),q.start()}catch(e){}}setupRouting(){try{this.load=new Q,this.load.init()}catch(e){}}async loadFonts(){if(R)try{const e=await async function(e){if(0===(e.size??e.length))throw new TypeError("Expected at least one font");return await async function(e){const t=[];for(const i of e)i instanceof FontFace?(document.fonts.has(i)||document.fonts.add(i),t.push(N(i))):t.push(...x(i).map(e=>N(e)));return await Promise.all(t)}([...e])}(P.EAGER,L.IS_DEV);document.documentElement.classList.add(M.FONTS_LOADED),L.IS_DEV&&e.length>0&&e.slice(0,3).forEach(e=>{})}catch(e){}}markAsReady(){const e=document.documentElement;e.classList.add(M.FIRST_LOADED,M.LOADED,M.READY),e.classList.remove(M.LOADING),e.classList.toggle("is-safari",-1!==navigator.userAgent.indexOf("Safari")&&-1!==navigator.userAgent.indexOf("Version")&&-1===navigator.userAgent.indexOf("Chrome"))}setupDevHelpers(){L.IS_DEV&&(window.appDebug={app:this,scroll:q,load:this.load,components:()=>document.querySelectorAll("[data-prototype-type]"),webgl:()=>document.querySelectorAll("c-gl-text, c-gl-video, c-gl-image, c-gl-about"),perf:()=>{performance.getEntriesByType("navigation")[0]},reloadComponents:()=>{this.registerComponents()}})}destroy(){try{this.load?.destroy(),q.destroy(),L.IS_DEV&&window.appDebug&&(delete window.appDebug,delete window.app),this.isInitialized=!1}catch(e){}}getStatus(){return{initialized:this.isInitialized,hasRouting:!!this.load,hasScrolling:!!q.locomotiveScroll,fonts:document.documentElement.classList.contains(M.FONTS_LOADED),environment:L.NAME,uptime:Math.round(performance.now()-this.startTime)}}}new Promise(e=>{"complete"===document.readyState?e():window.addEventListener("load",()=>{e()})}).then(async function(){try{document.getElementById("designerStyles")?.remove();const e=new Z;await e.initialize()}catch(e){document.body.innerHTML='\n      <div style="\n        display: flex; \n        align-items: center; \n        justify-content: center; \n        height: 100vh; \n        font-family: system-ui; \n        background: #f5f5f5;\n        color: #666;\n      ">\n        <div style="text-align: center;">\n          <h1 style="margin: 0 0 10px 0; color: #333;">App Failed to Load</h1>\n          <p style="margin: 0;">Check console for details</p>\n        </div>\n      </div>\n    '}});
