import{a as t,m as e,r as i,g as s,S as a,s as n,c as r,b as o,_ as l,l as h,d as c,e as d,u as m}from"./vendors.js";const u=(t,e)=>class extends t{constructor(...t){if(super(...t),this.prototypeType=e,!this.id){const t=g.get()+1;g.set(t),this.id=`${this.prototypeType.toLowerCase()}-${t}`}}connectedCallback(){"function"==typeof t.prototype.connectedCallback&&t.prototype.connectedCallback.call(this),p.set([...p.get(),this])}disconnectedCallback(){"function"==typeof t.prototype.disconnectedCallback&&t.prototype.disconnectedCallback.call(this),p.set(p.get().filter(t=>t.id!==this.id))}},g=t(0),p=t([]),y=(t,e=[])=>{let i=[];return"string"==typeof e?i=[e]:Array.isArray(e)?i=e:e instanceof HTMLElement&&e.id&&(i=[`#${e.id}`]),p.get().filter(e=>t===e.prototypeType&&!i.some(t=>e.matches(t)))},b=e({width:window.innerWidth,height:window.innerHeight}),f=e({width:window.innerWidth,height:window.innerHeight});window.addEventListener("resize",()=>{b.setKey("width",window.innerWidth),b.setKey("height",window.innerHeight)}),window.addEventListener("resize",i(()=>{f.setKey("width",window.innerWidth),f.setKey("height",window.innerHeight)},200));const v=document.documentElement,S=e({sm:getComputedStyle(v).getPropertyValue("--breakpoint-sm").trim()||"768px"}),w=e({reducedMotion:"(prefers-reduced-motion: reduce)",darkMode:"(prefers-color-scheme: dark)",touchScreen:"(hover: none)",touchOrSmall:`(max-width: ${S.get().sm}), (hover: none)`,small:`(max-width: ${S.get().sm})`,medium:`(min-width: ${S.get().sm}) and (max-width: 1200px)`,large:"(min-width: 1200px)"}),T=t=>{try{return matchMedia(t)}catch(e){return{matches:!1,addEventListener:()=>{}}}},I={reducedMotion:T(w.get().reducedMotion),darkMode:T(w.get().darkMode),touchScreen:T(w.get().touchScreen),touchOrSmall:T(w.get().touchOrSmall),small:T(w.get().small),medium:T(w.get().medium),large:T(w.get().large)},C=e({isReducedMotion:I.reducedMotion.matches,isDarkMode:I.darkMode.matches,isTouchScreen:I.touchScreen.matches,isTouchOrSmall:I.touchOrSmall.matches,isSmall:I.small.matches,isMedium:I.medium.matches,isLarge:I.large.matches,isDesktop:!I.touchScreen.matches,isMobile:I.small.matches&&I.touchScreen.matches,isTablet:I.medium.matches&&I.touchScreen.matches});Object.entries(I).forEach(([t,e])=>{e.addEventListener("change",()=>{const i=`is${t.charAt(0).toUpperCase()+t.slice(1)}`;C.setKey(i,e.matches),C.setKey("isDesktop",!I.touchScreen.matches),C.setKey("isMobile",I.small.matches&&I.touchScreen.matches),C.setKey("isTablet",I.medium.matches&&I.touchScreen.matches)})});const E=window.matchMedia("(any-pointer:coarse)").matches,A=Object.freeze({NAME:"production",IS_PROD:!0,IS_DEV:!1,IS_MOBILE:E,IS_DESKTOP:!E,SUPPORTS_VH:"CSS"in window&&"supports"in window.CSS&&window.CSS.supports("height: 100svh")&&window.CSS.supports("height: 100dvh")&&window.CSS.supports("height: 100lvh")}),M=Object.freeze({LOADING:"is-loading",FIRST_LOADED:"is-first-loaded",LOADED:"is-loaded",READY:"is-ready",TRANSITION:"is-transitioning",FONTS_LOADED:"fonts-loaded",LAZY_CONTAINER:"c-lazy",LAZY_LOADED:"-lazy-loaded",HAS_SCROLLED:"has-scrolled",HAS_MODAL_OPEN:"has-modal-open",SEQUENCE_LOADED:"is-sequence-loaded"}),L=Object.freeze({VISIT_START:"visit.start",GO_TO:"load.goTo",MODAL_OPEN:"modal.open",MODAL_CLOSE:"modal.close",WEBGL_READY:"webgl-ready",WEBGL_ERROR:"webgl-error"}),P=Object.freeze({EAGER:[{family:"Foundersgrotesk",style:"normal",weight:400},{family:"Foundersgrotesk",style:"normal",weight:600}],OPTIONS:{timeout:5e3,display:"swap"}});A.IS_MOBILE;const O="fonts"in document;function k(t,e){for(const[i,s]of Object.entries(e))switch(i){case"family":if(D(t[i])!==s)return!1;break;case"weight":if(t[i]!=s)return!1;break;default:if(t[i]!==s)return!1}return!0}function x(t,e){const i=D(t.family);return D(i)===e||e.endsWith(D(i))&&(e.match(t.weight)||e.match(t.style)),!0}function $(t){Array.isArray(t)||(t=[t]);const e=new Set;return t.forEach(t=>{if(t)switch(typeof t){case"string":return void e.add(...function(t){const e=[];for(const i of document.fonts)x(i,t)&&e.push(i);return e}(t));case"object":return void e.add(...function(t){const e=[];for(const i of document.fonts)k(i,t)&&e.push(i);return e}(t))}throw new TypeError("Expected font query to be font shorthand or font reference")}),[...e]}async function R(t){return await("unloaded"===t.status?t.load():t.loaded).then(t=>t,e=>t)}function D(t){return t.replace(/['"]+/g,"")}async function N(t){const e=$(t);return await Promise.all(e.map(t=>t.loaded))}s.registerPlugin(a);class _ extends HTMLElement{static PREV_CLASS="is-prev";static ACTIVE_CLASS="is-active";constructor(){super(),this.$text=this.querySelector("[data-split-text]")||this,this.splitInstance=null,this.isSplitting=!1,this.isRichText=!1,this.richTextContainer=null,this.richTextElements=[],this.richTextSplitInstances=[],this.onResize=this.onResize.bind(this),this.onSmallScreenChange=this.onSmallScreenChange.bind(this)}async connectedCallback(){try{this.detectRichText(),await Promise.all([document.fonts.ready,N(P.EAGER)]),this.bindEvents(),this.onFontsLoaded()}catch(t){}}disconnectedCallback(){this.unbindEvents(),this.resetSplit()}detectRichText(){const t=this.$text.querySelector(".rich-text");t&&(this.isRichText=!0,this.richTextContainer=t,this.richTextElements=Array.from(t.querySelectorAll("p, h1, h2, h3, h4, h5, h6, li, blockquote")).filter(t=>t.textContent.trim().length>0))}bindEvents(){this.unbindScreenListener=f.subscribe(this.onResize),this.unbindDeviceListener=n(C,["isSmall"],this.onSmallScreenChange)}unbindEvents(){this.unbindScreenListener?.(),this.unbindDeviceListener?.()}onSmallScreenChange=t=>{};onFontsLoaded=()=>{C.get().isSmall||this.reSplit()};onResize=()=>{this.reSplit()};handleLineBreaks(){const t=this.$text.innerHTML;this.$text.innerHTML=t.replace(/<br\s*\/?>/gi,"\n")}prepareSemanticTag(t){if(!["h1","h2","h3","h4","h5","h6","p"].includes(t.tagName.toLowerCase()))return t;if(t.querySelector("[data-split-wrapper]"))return t.querySelector("[data-split-wrapper]");const e=Array.from(t.childNodes),i=document.createElement("span");return i.dataset.splitWrapper="true",i.style.display="inherit",e.forEach(t=>{i.appendChild(t.cloneNode(!0))}),t.innerHTML="",t.appendChild(i),i}split(){this.isRichText?this.splitRichText():this.splitNormal()}splitNormal(){try{const t=this.dataset.splitType||this.$text.dataset.splitType||"words",e=this.dataset.splitMask||this.$text.dataset.splitMask||t;t.includes("lines");const i=this.prepareSemanticTag(this.$text);this.splitInstance=a.create(i,{type:t,tag:"span",linesClass:"split-line",wordsClass:"split-word",charsClass:"split-char",mask:e,autoSplit:!1});const s=this.getSplitItems(),n=this.getIndexPropertyName(t);s.forEach((t,e)=>{t.style.setProperty(n,e)}),this.isSplitting=!1}catch(t){this.isSplitting=!1}}splitRichText(){try{const t=this.dataset.splitType||this.$text.dataset.splitType||"lines",e=this.dataset.splitMask||this.$text.dataset.splitMask||t;this.richTextSplitInstances.forEach(t=>{t&&t.revert()}),this.richTextSplitInstances=[],this.richTextElements.forEach(i=>{const s=this.prepareSemanticTag(i),n=a.create(s,{type:t,tag:"span",linesClass:"split-line",wordsClass:"split-word",charsClass:"split-char",mask:e,autoSplit:!1});this.richTextSplitInstances.push(n),i.__splitInstance=n});const i=this.getSplitItems(),s=this.getIndexPropertyName(t);i.forEach((t,e)=>{t.style.setProperty(s,e)}),this.isSplitting=!1}catch(t){this.isSplitting=!1}}getIndexPropertyName(t){return t.includes(",")?`--${t.split(",")[0].slice(0,-1)}-index`:`--${t.slice(0,-1)}-index`}reSplit(){this.isSplitting||(this.isSplitting=!0,this.resetSplit(),requestAnimationFrame(()=>{this.split()}))}resetSplit(){if(this.isRichText)this.richTextSplitInstances.forEach(t=>{t&&t.revert()}),this.richTextSplitInstances=[],this.richTextElements.forEach(t=>{delete t.__splitInstance;const e=t.querySelector("[data-split-wrapper]");e&&(t.innerHTML=e.innerHTML)});else if(this.splitInstance&&(this.splitInstance.revert(),this.splitInstance=null),this.$text){const t=this.$text.querySelector("[data-split-wrapper]");t&&(this.$text.innerHTML=t.innerHTML)}}getSplitItems(){if(this.isRichText){const t=[],e=this.dataset.splitType||this.$text.dataset.splitType||"words",i=e.includes(",")?e.split(",")[0]:e;return this.richTextSplitInstances.forEach(e=>{e&&e[i]&&t.push(...e[i])}),t}if(!this.splitInstance)return[];const t=this.dataset.splitType||this.$text.dataset.splitType||"words";if(t.includes(",")){const e=t.split(",")[0];return this.splitInstance[e]||[]}return this.splitInstance[t]||[]}getItems(){return this.getSplitItems()}getWords(){return this.getSplitItems()}animateIn(t=.8,e=.05){const i=this.getItems();if(!i.length)return;const a=(this.dataset.splitType||this.$text.dataset.splitType||"words").includes("lines")?{yPercent:100,opacity:0}:{opacity:0,y:20};return s.fromTo(i,a,{yPercent:0,y:0,opacity:1,duration:t,stagger:e,ease:"power2.out"})}animateOut(t=.6,e=.03){const i=this.getItems();if(!i.length)return;const a=(this.dataset.splitType||this.$text.dataset.splitType||"words").includes("lines")?{yPercent:-100,opacity:0}:{y:-10,opacity:0};return s.to(i,{...a,duration:t,stagger:e,ease:"power2.in"})}}class F{constructor(t={}){this.dbName=t.dbName||"SequenceImageCache",this.storeName="images",this.metaStoreName="metadata",this.db=null,this.version=t.version||"1.0.0",this.maxAge=t.maxAge||6048e5,this.chunkSize=t.chunkSize||5,this.corsMode=t.corsMode||"cors",this.crossOrigin=t.crossOrigin||"anonymous",this.maxMemoryImages=t.maxMemoryImages||30,this.imageMemoryMap=new Map,this.compressionQuality=t.compressionQuality||.85,this.useWebP=!1!==t.useWebP,this.isLowMemory=!1,this.checkMemoryInterval=null,this.activeBlobUrls=new Set,this.isMobile=window.innerWidth<=768,this.isTablet=window.innerWidth<=1024&&window.innerWidth>768,this.isMobile?(this.maxMemoryImages=15,this.compressionQuality=.75,this.chunkSize=3):this.isTablet&&(this.maxMemoryImages=20,this.compressionQuality=.8,this.chunkSize=4)}async init(){return this.startMemoryMonitoring(),new Promise((t,e)=>{const i=indexedDB.open(this.dbName,3);i.onupgradeneeded=t=>{const e=t.target.result;if(t.oldVersion<3&&(e.objectStoreNames.contains(this.storeName)&&e.deleteObjectStore(this.storeName),e.objectStoreNames.contains(this.metaStoreName)&&e.deleteObjectStore(this.metaStoreName)),!e.objectStoreNames.contains(this.storeName)){const t=e.createObjectStore(this.storeName,{keyPath:"id",autoIncrement:!1});t.createIndex("url","url",{unique:!1}),t.createIndex("sequenceId","sequenceId",{unique:!1}),t.createIndex("frameNumber","frameNumber",{unique:!1}),t.createIndex("timestamp","timestamp",{unique:!1})}e.objectStoreNames.contains(this.metaStoreName)||e.createObjectStore(this.metaStoreName,{keyPath:"sequenceId"})},i.onsuccess=e=>{this.db=e.target.result,this.startPeriodicCleanup(),t(this.db)},i.onerror=t=>{e(t.target.error)}})}startMemoryMonitoring(){"storage"in navigator&&"estimate"in navigator.storage&&(this.checkMemoryInterval=setInterval(async()=>{try{const t=await navigator.storage.estimate(),e=t.usage/t.quota*100;this.isLowMemory=e>80,this.isLowMemory&&(this.maxMemoryImages=Math.floor(this.maxMemoryImages/2))}catch(t){}},3e4))}startPeriodicCleanup(){setInterval(()=>{this.pruneExpiredCache()},6e4)}async getSequenceMetadata(t){return this.db||await this.init(),new Promise((e,i)=>{try{const i=this.db.transaction([this.metaStoreName],"readonly").objectStore(this.metaStoreName).get(t);i.onsuccess=()=>e(i.result),i.onerror=t=>{e(null)}}catch(s){e(null)}})}async saveSequenceMetadata(t,e){return this.db||await this.init(),new Promise((i,s)=>{try{const s=this.db.transaction([this.metaStoreName],"readwrite").objectStore(this.metaStoreName),a={sequenceId:t,version:this.version,timestamp:Date.now(),...e},n=s.put(a);n.onsuccess=()=>i(),n.onerror=t=>{i()}}catch(a){i()}})}generateCacheKey(t,e,i){return`${e}_${i}_${t.split("/").pop()}`}async getCachedImage(t,e,i){this.db||await this.init();const s=this.generateCacheKey(t,e,i);return this.imageMemoryMap.has(s)?this.imageMemoryMap.get(s):new Promise((t,e)=>{try{const e=this.db.transaction([this.storeName],"readonly").objectStore(this.storeName).get(s);e.onsuccess=async()=>{const i=e.result;if(i&&this.isValidCache(i)){let e=i.blob;i.compressed&&(e=await this.decompressImage(e,i.originalType)),this.addToMemoryCache(s,e),t(e)}else t(null)},e.onerror=()=>t(null)}catch(i){t(null)}})}async compressImage(t,e=this.compressionQuality){return t.size<5e4||!this.isMobile&&!this.isLowMemory?{blob:t,compressed:!1,originalType:t.type}:new Promise(i=>{const s=new Image,a=URL.createObjectURL(t);s.onload=()=>{const n=document.createElement("canvas"),r=n.getContext("2d");let{width:o,height:l}=s;const h=this.isMobile?1024:2048;if(o>h||l>h){const t=h/Math.max(o,l);o=Math.floor(o*t),l=Math.floor(l*t)}n.width=o,n.height=l,r.drawImage(s,0,0,o,l),n.toBlob(e=>{URL.revokeObjectURL(a),e&&e.size<t.size?i({blob:e,compressed:!0,originalType:t.type}):i({blob:t,compressed:!1,originalType:t.type})},this.useWebP?"image/webp":"image/jpeg",e)},s.onerror=()=>{URL.revokeObjectURL(a),i({blob:t,compressed:!1,originalType:t.type})},s.src=a})}async decompressImage(t,e){return e&&e!==t.type?new Promise(i=>{const s=new Image,a=URL.createObjectURL(t);s.onload=()=>{const n=document.createElement("canvas");n.width=s.width,n.height=s.height,n.getContext("2d").drawImage(s,0,0),n.toBlob(e=>{URL.revokeObjectURL(a),i(e||t)},e,1)},s.onerror=()=>{URL.revokeObjectURL(a),i(t)},s.src=a}):t}addToMemoryCache(t,e){if(this.imageMemoryMap.size>=this.maxMemoryImages){const t=this.imageMemoryMap.keys().next().value;this.imageMemoryMap.get(t),this.imageMemoryMap.delete(t)}this.imageMemoryMap.set(t,e)}async saveImage(t,e,i,s){if(this.db||await this.init(),this.isLowMemory)return;const a=this.generateCacheKey(t,i,s),{blob:n,compressed:r,originalType:o}=await this.compressImage(e);return new Promise((e,l)=>{try{const l=this.db.transaction([this.storeName],"readwrite").objectStore(this.storeName),h={id:a,url:t,blob:n,compressed:r,originalType:o,sequenceId:i,frameNumber:s,version:this.version,timestamp:Date.now(),size:n.size},c=l.put(h);c.onsuccess=()=>e(),c.onerror=t=>{e()}}catch(h){e()}})}async loadImageWithCache(t,e,i){try{const s=await this.getCachedImage(t,e,i);if(s){const a=URL.createObjectURL(s);this.activeBlobUrls.add(a);const n=new Image;return n.crossOrigin=this.crossOrigin,new Promise(s=>{n.onload=()=>{s({img:n,fromCache:!0,blobUrl:a})},n.onerror=async()=>{this.cleanupBlobUrl(a);const n=await this.fetchAndCacheImage(t,e,i);s(n)},n.src=a})}return await this.fetchAndCacheImage(t,e,i)}catch(s){return this.loadImageDirect(t)}}async fetchAndCacheImage(t,e,i){return new Promise(async s=>{try{const a=new AbortController,n=setTimeout(()=>a.abort(),1e4),r=await fetch(t,{mode:this.corsMode,credentials:"same-origin",cache:"default",signal:a.signal});if(clearTimeout(n),!r.ok)throw new Error(`HTTP error! status: ${r.status}`);const o=await r.blob();this.saveImage(t,o,e,i).catch(console.warn);const l=URL.createObjectURL(o);this.activeBlobUrls.add(l);const h=new Image;h.crossOrigin=this.crossOrigin,h.onload=()=>{s({img:h,fromCache:!1,blobUrl:l})},h.onerror=()=>{this.cleanupBlobUrl(l),s(this.loadImageDirect(t))},h.src=l}catch(a){"AbortError"===a.name||"TypeError"===a.name&&a.message.includes("CORS"),s(this.loadImageDirect(t))}})}async loadImageDirect(t){const e=new Image;return e.crossOrigin=this.crossOrigin,new Promise(i=>{e.onload=()=>i({img:e,fromCache:!1,blobUrl:null}),e.onerror=()=>{i({img:null,fromCache:!1,blobUrl:null})},e.src=t})}cleanupBlobUrl(t){t&&this.activeBlobUrls.has(t)&&(URL.revokeObjectURL(t),this.activeBlobUrls.delete(t))}cleanupAllBlobUrls(){for(const t of this.activeBlobUrls)URL.revokeObjectURL(t);this.activeBlobUrls.clear()}async loadSequenceImages(t,e,i){const s=new Array(t.length);let a=0;const n=await this.getSequenceMetadata(e);n&&n.version!==this.version&&await this.clearSequenceCache(e),await this.saveSequenceMetadata(e,{frameCount:t.length,lastAccessed:Date.now()});const r=this.isMobile?3:this.chunkSize;for(let o=0;o<t.length;o+=r){const n=t.slice(o,Math.min(o+r,t.length)).map((n,r)=>{const l=o+r;return this.loadImageWithCache(n,e,l+1).then(e=>(a++,s[l]=e.img,i&&i(a,t.length,e.fromCache,e.img,l),e.img)).catch(e=>(a++,i&&i(a,t.length,!1,null,l),null))});await Promise.all(n),this.isMobile&&o+r<t.length&&await new Promise(t=>setTimeout(t,50))}return s}isValidCache(t){return t.version===this.version&&!(Date.now()-t.timestamp>this.maxAge)}async clearSequenceCache(t){this.db||await this.init();for(const e of this.imageMemoryMap.keys())e.startsWith(t)&&this.imageMemoryMap.delete(e);return new Promise((e,i)=>{try{const i=this.db.transaction([this.storeName],"readwrite").objectStore(this.storeName),s=i.index("sequenceId").openCursor(IDBKeyRange.only(t));s.onsuccess=t=>{const s=t.target.result;s?(i.delete(s.primaryKey),s.continue()):e()},s.onerror=t=>{e()}}catch(s){e()}})}async clearAllCache(){return this.db||await this.init(),this.imageMemoryMap.clear(),this.cleanupAllBlobUrls(),new Promise((t,e)=>{try{const e=this.db.transaction([this.storeName,this.metaStoreName],"readwrite");e.objectStore(this.storeName).clear(),e.objectStore(this.metaStoreName).clear(),e.oncomplete=()=>t(),e.onerror=e=>{t()}}catch(i){t()}})}async getCacheSize(){if("storage"in navigator&&"estimate"in navigator.storage)try{const t=await navigator.storage.estimate();return{usage:t.usage,quota:t.quota,percentUsed:(t.usage/t.quota*100).toFixed(2)}}catch(t){return null}return null}async pruneExpiredCache(){if(!this.db)return;const t=Date.now()-this.maxAge;return new Promise((e,i)=>{try{const i=this.db.transaction([this.storeName],"readwrite").objectStore(this.storeName).index("timestamp"),s=IDBKeyRange.upperBound(t),a=i.openCursor(s);let n=0;a.onsuccess=t=>{const i=t.target.result;i?(i.delete(),n++,i.continue()):e(n)},a.onerror=t=>{e(0)}}catch(s){e(0)}})}async pruneOldCaches(t=[]){return this.db||await this.init(),new Promise((e,i)=>{try{const i=this.db.transaction([this.storeName],"readwrite").objectStore(this.storeName).openCursor();let s=0;i.onsuccess=i=>{const a=i.target.result;if(a){const e=a.value;(!this.isValidCache(e)||t.length&&!t.includes(e.sequenceId))&&(a.delete(),s++),a.continue()}else e(s)},i.onerror=t=>{e(0)}}catch(s){e(0)}})}destroy(){this.checkMemoryInterval&&clearInterval(this.checkMemoryInterval),this.cleanupAllBlobUrls(),this.imageMemoryMap.clear(),this.db&&(this.db.close(),this.db=null)}}const z=e({scroll:window.scrollY,limit:0,velocity:0,direction:0,progress:0}),U=document.documentElement;class q{static init(){this.locomotiveScroll=new r({lenisOptions:{orientation:this.orientation,gestureOrientation:this.orientation,syncTouch:!0,autoRaf:!1},autoStart:!1,initCustomTicker:t=>{s.ticker.add(t)},destroyCustomTicker:t=>{s.ticker.remove(t)},scrollCallback({scroll:t,limit:e,velocity:i,direction:s,progress:a}){z.set({scroll:t,limit:e,velocity:i,direction:s,progress:a}),t>20?U.classList.contains("has-scrolled")||U.classList.add("has-scrolled"):U.classList.contains("has-scrolled")&&U.classList.remove("has-scrolled")}})}static destroy(){this.locomotiveScroll?.destroy()}static start(){this.locomotiveScroll?.start()}static stop(){this.locomotiveScroll?.stop()}static addScrollElements(t){this.locomotiveScroll?.addScrollElements(t)}static removeScrollElements(t){this.locomotiveScroll?.removeScrollElements(t)}static scrollTo(t,e){this.locomotiveScroll?.scrollTo(t,e)}}s.registerPlugin(o);class B extends HTMLElement{constructor(){super(),this.frameCount=parseInt(this.getAttribute("data-frame-count"))||219,this.frameCountMobile=parseInt(this.getAttribute("data-frame-count-mobile"))||223,this.frameStart=parseInt(this.getAttribute("data-frame-start"))||1,this.imageFolder=this.getAttribute("data-image-folder")||"",this.imageMobileFolder=this.getAttribute("data-image-mobile-folder")||this.imageFolder,this.imageFormat=this.getAttribute("data-image-format")||"webp",this.scrollDistance=this.getAttribute("data-scroll-distance")||"500%",this.enableCache="false"!==this.getAttribute("data-enable-cache"),this.cacheVersion=this.getAttribute("data-cache-version")||"1.0.0",this.cacheMaxAge=parseInt(this.getAttribute("data-cache-max-age"))||6048e5,this.scaleTarget=this.getAttribute("data-scale-target")||null,this.scaleStart=parseFloat(this.getAttribute("data-scale-start"))||0,this.scaleEnd=parseFloat(this.getAttribute("data-scale-end"))||.7,this.scalePeak=this.getAttribute("data-scale-peak")?parseFloat(this.getAttribute("data-scale-peak")):.2,this.scaleFromX=0,this.scaleFromY=0,this.scaleToX=0,this.scaleToY=0,this.snapPoints=this.getAttribute("data-snap-points")?JSON.parse(this.getAttribute("data-snap-points")):[0,.45,.8],this.bufferSize=this.getAttribute("data-buffer-size")?parseInt(this.getAttribute("data-buffer-size")):window.innerWidth<=768?15:30,this.preloadAhead=this.getAttribute("data-preload-ahead")?parseInt(this.getAttribute("data-preload-ahead")):window.innerWidth<=768?5:10,this.imageMap=new Map,this.loadingQueue=new Set,this.lastCleanupFrame=0,this.imagesLoaded=0,this.cachedImagesLoaded=0,this.currentFrame=0,this.targetFrame=0,this.scrollTrigger=null,this.scaleTween=null,this.isCleaningUp=!1,this.resizeObserver=null,this.showLoadingAnimation=!1,this.isInitialized=!1,this.frameUpdatePending=null,this.lastFrameTime=0,this.frameSkipThreshold=16,this.scrolling=!1,this.scrollEndTimer=null,this.$canvas=null,this.$loading=null,this.$loadingBar=null,this.$loadingText=null,this.$loadingMask=null,this.$scaleElement=null,this.$cacheStatus=null,this.ctx=null,this.isMobile=!1,this.isTablet=window.innerWidth<=1024&&window.innerWidth>768,this.mm=s.matchMedia(),this.onResize=this.debounce(this.onResize.bind(this),250),this.onSmallScreenChange=this.onSmallScreenChange.bind(this),this.handleCanvasResize=this.handleCanvasResize.bind(this),this.checkOrientation=this.checkOrientation.bind(this),this.handleScrollStart=this.handleScrollStart.bind(this),this.handleScrollEnd=this.handleScrollEnd.bind(this),this.enableCache&&(this.imageCache=new F({dbName:"SequenceCanvasCache",version:this.cacheVersion,maxAge:this.cacheMaxAge,chunkSize:Math.min(5,Math.ceil(this.frameCount/40)),corsMode:"cors",crossOrigin:"anonymous"}))}debounce(t,e){let i;return function(...s){clearTimeout(i),i=setTimeout(()=>{clearTimeout(i),t(...s)},e)}}throttle(t,e){let i;return function(...s){i||(t.apply(this,s),i=!0,setTimeout(()=>i=!1,e))}}connectedCallback(){this.updateScaleValues(),this.isMobile&&this.checkOrientation(),this.bindEvents(),this.initElements(),this.setupResizeObserver(),this.startProgressiveLoading()}disconnectedCallback(){this.unbindEvents(),this.isCleaningUp||this.cleanup(),this.resizeObserver&&this.resizeObserver.disconnect();const t=document.getElementById("orientation-warning");t&&t.remove()}bindEvents(){this.unbindScreenListener=f.subscribe(this.onResize),this.unbindDeviceListener=n(C,["isSmall"],this.onSmallScreenChange),window.addEventListener("scroll",this.handleScrollStart,{passive:!0})}unbindEvents(){this.unbindScreenListener?.(),this.unbindDeviceListener?.(),window.removeEventListener("scroll",this.handleScrollStart)}handleScrollStart(){this.scrolling||(this.scrolling=!0,this.isMobile&&this.ctx&&(this.ctx.imageSmoothingEnabled=!1)),clearTimeout(this.scrollEndTimer),this.scrollEndTimer=setTimeout(this.handleScrollEnd,150)}handleScrollEnd(){this.scrolling=!1,this.isMobile&&this.ctx&&(this.ctx.imageSmoothingEnabled=!0,this.imageMap.has(this.currentFrame)&&this.drawImageToCanvas(this.imageMap.get(this.currentFrame)))}onSmallScreenChange(t){this.updateScaleValues(),this.isInitialized&&(this.handleCanvasResize(),this.$scaleElement&&this.scaleTween&&this.reinitScaleAnimation(),o.refresh())}checkOrientation(){this.isMobile&&(window.innerWidth>window.innerHeight?this.showOrientationWarning():this.hideOrientationWarning())}showOrientationWarning(){let t=document.getElementById("orientation-warning");t||(t=document.createElement("div"),t.id="orientation-warning",t.innerHTML='\n        <div style="position: fixed; inset: 0; background: black; color: white; \n                    display: flex; align-items: center; justify-content: center; \n                    z-index: 9999; text-align: center; padding: 2rem;">\n          <div>\n            <svg width="64" height="64" viewBox="0 0 24 24" fill="none" stroke="currentColor" style="margin: 0 auto 1rem;">\n              <rect x="4" y="2" width="16" height="20" rx="2" ry="2"/>\n              <line x1="12" y1="18" x2="12" y2="18"/>\n            </svg>\n            <h2 style="font-size: 1.5rem; margin-bottom: 0.5rem;">Portrait Mode Only</h2>\n            <p style="opacity: 0.8;">Please rotate your device to portrait orientation</p>\n          </div>\n        </div>\n      ',document.body.appendChild(t)),t.style.display="flex"}hideOrientationWarning(){const t=document.getElementById("orientation-warning");t&&(t.style.display="none")}onResize(){this.isMobile?this.checkOrientation():(this.updateScaleValues(),this.$scaleElement&&this.scaleTween&&this.isInitialized&&this.reinitScaleAnimation())}updateScaleValues(){this.isMobile=window.innerWidth<=479,this.isTablet=window.innerWidth<=1024&&window.innerWidth>479,this.isMobile?(this.bufferSize=15,this.preloadAhead=5):this.isTablet?(this.bufferSize=20,this.preloadAhead=8):(this.bufferSize=30,this.preloadAhead=10),this.frameCount=this.isMobile?this.frameCountMobile:parseInt(this.getAttribute("data-frame-count"))||219;const t=getComputedStyle(document.documentElement),e=parseFloat(t.getPropertyValue("--vw"))||14.4,i=parseFloat(t.getPropertyValue("--vh"))||8;if(this.viewportWidth=window.innerWidth,this.viewportHeight=window.innerHeight,this.isMobile){const t=this.hasAttribute("data-scale-mobile-from-x"),s=this.hasAttribute("data-scale-mobile-from-y");this.scaleFromX=t?parseFloat(this.getAttribute("data-scale-mobile-from-x")):.255*e,this.scaleFromY=s?parseFloat(this.getAttribute("data-scale-mobile-from-y")):.12*i,this.scaleToX=this.hasAttribute("data-scale-mobile-to-x")?parseFloat(this.getAttribute("data-scale-mobile-to-x")):5*this.scaleFromX,this.scaleToY=this.hasAttribute("data-scale-mobile-to-y")?parseFloat(this.getAttribute("data-scale-mobile-to-y")):5*this.scaleFromY}else{const t=this.hasAttribute("data-scale-from-x"),s=this.hasAttribute("data-scale-from-y");this.scaleFromX=t?parseFloat(this.getAttribute("data-scale-from-x")):.93*e,this.scaleFromY=s?parseFloat(this.getAttribute("data-scale-from-y")):.9*i,this.scaleToX=this.hasAttribute("data-scale-to-x")?parseFloat(this.getAttribute("data-scale-to-x")):2*this.scaleFromX,this.scaleToY=this.hasAttribute("data-scale-to-y")?parseFloat(this.getAttribute("data-scale-to-y")):2*this.scaleFromY}}reinitScaleAnimation(){if(!this.$scaleElement||!this.scaleTween)return;const t=this.scaleTween.progress();this.scaleTween.kill(),this.scaleTween=null,this.clipPathOffsetX=this.viewportWidth/2-50,this.clipPathOffsetY=this.viewportHeight/2-50,this.transformOrigin=this.isMobile?"50px 30px":"50px 50px",s.set(this.$scaleElement,{scaleX:this.scaleFromX,scaleY:this.scaleFromY,transformOrigin:this.transformOrigin,x:this.clipPathOffsetX,y:this.clipPathOffsetY}),this.initScaleAnimation(),this.scaleTween&&this.scaleTween.progress(t)}setupResizeObserver(){if(!this.$canvas)return;let t;this.resizeObserver=new ResizeObserver(e=>{clearTimeout(t),t=setTimeout(()=>{for(const t of e)this.handleCanvasResize()},100)}),this.resizeObserver.observe(this.$canvas)}handleCanvasResize(){if(!this.$canvas||!this.ctx)return;const t=window.innerWidth,e=window.innerHeight,i=Math.floor(1*t),s=Math.floor(1*e);if((this.$canvas.width!==i||this.$canvas.height!==s)&&(this.$canvas.width=i,this.$canvas.height=s,this.$canvas.style.width="100%",this.$canvas.style.height="100%",this.imageMap.has(this.currentFrame)))try{this.drawImageToCanvas(this.imageMap.get(this.currentFrame))}catch(a){}}drawImageToCanvas(t){if(t&&this.ctx)try{const e=this.$canvas.width,i=this.$canvas.height;this.isMobile&&void 0!==this.ctx.imageSmoothingEnabled&&(this.ctx.imageSmoothingQuality="low"),this.ctx.clearRect(0,0,e,i);const s=t.width/t.height;let a,n,r,o;s>e/i?(n=i,a=n*s,r=(e-a)/2,o=0):(a=e,n=a/s,r=0,o=(i-n)/2),this.ctx.drawImage(t,r,o,a,n)}catch(e){}}initElements(){if(s.set(this,{height:this.scrollDistance}),this.$canvas=this.querySelector("canvas")||this.createCanvas(),this.ctx=this.$canvas.getContext("2d",{alpha:!0,desynchronized:!0}),this.$loading=this.querySelector("[data-loading]"),this.$loadingBar=this.querySelector("[data-loading-bar]"),this.$loadingText=this.querySelector("[data-loading-text]"),this.$loadingMask=this.querySelector("[data-loading-mask]"),this.$cacheStatus=this.querySelector("[data-cache-status]"),this.scaleTarget){const t=this.isMobile?"houseMobile":"house";this.$scaleElement=document.querySelector(`#${t}`);const e=this.$canvas.parentElement;e&&(e.style.clipPath=`url(#${t})`);const i=this.isMobile?this.viewportWidth/2-181:this.viewportWidth/2-50,a=this.isMobile?this.viewportHeight/2-155:this.viewportHeight/2-50,n=this.isMobile?"181px 100px":"50px 50px";s.set(this.$scaleElement,{scaleX:this.scaleFromX,scaleY:this.scaleFromY,transformOrigin:n,x:i,y:a}),this.clipPathOffsetX=i,this.clipPathOffsetY=a,this.transformOrigin=n}}createCanvas(){let t=this.querySelector("[data-pin-target]");t||(t=document.createElement("div"),t.setAttribute("data-pin-target",""),t.className="sequence-canvas-wrapper",this.appendChild(t)),this.isMobile?t.classList.add("is-mobile"):t.classList.remove("is-mobile");const e=document.createElement("canvas");return e.id="sequenceCanvas",e.setAttribute("data-canvas",""),t.appendChild(e),e}getImageUrl(t){return`${this.isMobile&&this.imageMobileFolder?this.imageMobileFolder:this.imageFolder}${String(t).padStart(4,"0")}.${this.imageFormat}`}getSequenceId(){return`${this.isMobile&&this.imageMobileFolder?this.imageMobileFolder:this.imageFolder}_${this.frameCount}_${this.cacheVersion}`}async startProgressiveLoading(){const t=Math.min(5,this.frameCount),e=[];for(let i=0;i<t;i++)e.push(this.getImageUrl(i+this.frameStart));this.showLoadingAnimation=!0,await this.loadImageBatch(e,0),this.imageMap.has(0)&&this.updateFrame(0),this.hideLoadingUI(),q.start(),this.isInitialized=!0,document.documentElement.classList.add(M.SEQUENCE_LOADED),this.initScrollTrigger(),this.$scaleElement&&this.initScaleAnimation(),this.loadRemainingFrames()}async loadImageBatch(t,e){const i=t.map(async(t,i)=>{const s=e+i;if(!this.imageMap.has(s)&&!this.loadingQueue.has(s)){this.loadingQueue.add(s);try{let e;if(this.enableCache&&this.imageCache)e=await this.imageCache.loadImageWithCache(t,this.getSequenceId(),s+1),e.fromCache&&this.cachedImagesLoaded++;else{const i=new Image;i.crossOrigin="anonymous",await new Promise((e,s)=>{i.onload=e,i.onerror=s,i.src=t}),e={img:i,fromCache:!1}}e.img&&(this.imageMap.set(s,e.img),this.imagesLoaded++,this.updateLoadingProgress())}catch(a){}finally{this.loadingQueue.delete(s)}}});await Promise.all(i)}async loadRemainingFrames(){const t=async t=>{const e=Math.max(0,t-this.bufferSize),i=Math.min(this.frameCount-1,t+this.bufferSize),s=[],a=[];for(let n=e;n<=i;n++)this.imageMap.has(n)||this.loadingQueue.has(n)||(s.push(this.getImageUrl(n+this.frameStart)),a.push(n));if(s.length>0){const t=this.isMobile?3:5;for(let e=0;e<s.length;e+=t){const i=s.slice(e,e+t),n=a.slice(e,e+t);await this.loadImageBatch(i,n[0])}}};if(await t(0),this.scrollTrigger){const e=()=>{const e=this.scrollTrigger.progress||0,i=Math.floor(e*(this.frameCount-1));t(i),this.cleanupDistantFrames(i)};this.loadInterval=setInterval(e,500)}}cleanupDistantFrames(t){if(!this.isMobile&&!this.isTablet)return;if(Math.abs(t-this.lastCleanupFrame)<10)return;this.lastCleanupFrame=t;const e=Math.max(0,t-this.bufferSize),i=Math.min(this.frameCount-1,t+this.bufferSize);for(const[s,a]of this.imageMap)(s<e||s>i)&&(a.src&&a.src.startsWith("blob:")&&URL.revokeObjectURL(a.src),this.imageMap.delete(s))}updateLoadingProgress(){const t=this.imagesLoaded/this.frameCount*100;if(this.$loadingBar&&(this.$loadingBar.style.width=`${t}%`),this.$loadingText&&(this.$loadingText.textContent=`Loading: ${Math.round(t)}%`),this.$cacheStatus&&this.enableCache){const t=this.imagesLoaded>0?Math.round(this.cachedImagesLoaded/this.imagesLoaded*100):0;this.$cacheStatus.textContent=`Cache: ${t}% hit rate`}}hideLoadingUI(){this.$loading&&this.showLoadingAnimation?s.to(this.$loading,{opacity:0,duration:.4,ease:"power2.out",onComplete:()=>{this.$loading.classList.add("hidden")}}):this.$loading&&this.$loading.classList.add("hidden")}initScaleAnimation(){this.$scaleElement&&(null!==this.scalePeak?this.scaleTween=s.timeline({paused:!0}).to(this.$scaleElement,{scaleX:this.scaleToX,scaleY:this.scaleToY,transformOrigin:this.transformOrigin,x:this.clipPathOffsetX,y:this.clipPathOffsetY,ease:"power2.inOut"}).to(this.$scaleElement,{scaleX:this.scaleFromX,scaleY:this.scaleFromY,transformOrigin:this.transformOrigin,x:this.clipPathOffsetX,y:this.clipPathOffsetY,ease:"power2.inOut"}):this.scaleTween=s.timeline({paused:!0}).to(this.$scaleElement,{scaleX:this.scaleToX,scaleY:this.scaleToY,transformOrigin:this.transformOrigin,x:this.clipPathOffsetX,y:this.clipPathOffsetY,ease:"power2.inOut"}))}updateScaleProgress(t){if(!this.scaleTween)return;let e=0;e=null!==this.scalePeak?t<=this.scaleStart?0:t<=this.scalePeak?(t-this.scaleStart)/(this.scalePeak-this.scaleStart)*.5:t<=this.scaleEnd?.5+(t-this.scalePeak)/(this.scaleEnd-this.scalePeak)*.5:1:t<this.scaleStart?0:t>this.scaleEnd?1:(t-this.scaleStart)/(this.scaleEnd-this.scaleStart),this.scaleTween.progress(e)}initScrollTrigger(){this.scrollTrigger=o.create({trigger:this,start:"top top",end:"bottom 0%",scrub:!0,invalidateOnRefresh:!0,onUpdate:t=>{const e=Math.floor(t.progress*(this.frameCount-1));this.targetFrame=e;const i=Math.min(this.frameCount-1,e+this.preloadAhead);for(let s=e;s<=i;s++)this.imageMap.has(s)||this.loadingQueue.has(s)||this.loadImageBatch([this.getImageUrl(s+this.frameStart)],s);this.updateFrame(e),this.updateScaleProgress(t.progress),t.progress>.8?s.set(this,{zIndex:998}):s.set(this,{zIndex:999})},fastScrollEnd:!0,preventOverlaps:!0,onRefresh:()=>{this.imageMap.has(this.currentFrame)&&this.drawImageToCanvas(this.imageMap.get(this.currentFrame))}})}updateFrame(t){if(!(t!==this.currentFrame&&this.imageMap.has(t)||this.imageMap.has(t))){for(let e=1;e<=5;e++){if(this.imageMap.has(t-e)){t-=e;break}if(this.imageMap.has(t+e)){t+=e;break}}if(!this.imageMap.has(t))return}if(this.currentFrame=t,this.isMobile&&this.scrolling){const t=performance.now();if(t-this.lastFrameTime<33)return;this.lastFrameTime=t}this.frameUpdatePending&&cancelAnimationFrame(this.frameUpdatePending),this.frameUpdatePending=requestAnimationFrame(()=>{try{const e=this.imageMap.get(t);e&&this.drawImageToCanvas(e),this.frameUpdatePending=null}catch(e){this.frameUpdatePending=null}})}cleanup(){if(!this.isCleaningUp){if(this.isCleaningUp=!0,this.loadInterval&&(clearInterval(this.loadInterval),this.loadInterval=null),this.frameUpdatePending&&(cancelAnimationFrame(this.frameUpdatePending),this.frameUpdatePending=null),this.scrollTrigger)try{this.scrollTrigger.kill(!0),this.scrollTrigger=null}catch(t){}this.scaleTween&&(this.scaleTween.kill(),this.scaleTween=null),this.resizeObserver&&(this.resizeObserver.disconnect(),this.resizeObserver=null);for(const[t,e]of this.imageMap)e.src&&e.src.startsWith("blob:")&&URL.revokeObjectURL(e.src);this.imageMap.clear(),this.loadingQueue.clear(),this.imagesLoaded=0,this.cachedImagesLoaded=0,this.currentFrame=0,this.isInitialized=!1,this.isCleaningUp=!1}}getProgress(){return this.scrollTrigger?.progress||0}getCurrentFrame(){return this.currentFrame}getTotalFrames(){return this.frameCount}isLoaded(){return this.imagesLoaded>=Math.min(2*this.bufferSize,this.frameCount)}getCacheStats(){return{enabled:this.enableCache,cachedFrames:this.cachedImagesLoaded,loadedFrames:this.imagesLoaded,totalFrames:this.frameCount,cacheHitRate:this.imagesLoaded>0?Math.round(this.cachedImagesLoaded/this.imagesLoaded*100):0,memoryFrames:this.imageMap.size}}async clearCache(){if(this.imageCache){const t=this.getSequenceId();await this.imageCache.clearSequenceCache(t),this.cachedImagesLoaded=0,this.$cacheStatus&&(this.$cacheStatus.textContent="Cache cleared")}}async getCacheSize(){return this.imageCache?await this.imageCache.getCacheSize():null}async pruneOldCaches(){if(this.imageCache){const t=this.getSequenceId();return await this.imageCache.pruneOldCaches([t])}return 0}refresh(){o.refresh()}}s.registerPlugin(o);class V extends HTMLElement{constructor(){super(),this.DOM={container:this,wrapper:null,list:null,cards:[],cardsContent:[]},this.currentCardIndex=null,this.scrollTrigger=null,this.onMouseEnter=this.onMouseEnter.bind(this),this.onMouseLeave=this.onMouseLeave.bind(this),this.onDesktopChange=this.onDesktopChange.bind(this)}connectedCallback(){this.setupDOM(),this.initializeCards(),this.bindEvents()}disconnectedCallback(){this.unbindEvents(),this.cleanup()}setupDOM(){this.DOM.wrapper=this.querySelector("[data-cards-wrapper]")||this.querySelector(".cards_stack_wrapper"),this.DOM.list=this.querySelector("[data-cards-list]")||this.querySelector(".cards_stack_list"),this.DOM.cards=Array.from(this.querySelectorAll("[data-card]")||this.querySelectorAll(".cards_stack_item")),this.DOM.cardsContent=this.DOM.cards.map(t=>t.querySelector("[data-card-content]")||t.firstElementChild)}initializeCards(){this.DOM.cards.forEach(t=>{s.set(t,{rotation:3*s.utils.random(-1,1)})})}bindEvents(){this.unbindMediaListener=n(C,["isSmall"],this.onDesktopChange);const{isSmall:t}=C.get();t||this.initDesktopBehavior()}unbindEvents(){this.unbindMediaListener?.(),this.removeDesktopListeners()}onDesktopChange({isSmall:t}){t?(this.removeDesktopListeners(),this.resetCards()):this.initDesktopBehavior()}initDesktopBehavior(){this.scatterCards(),this.createEntranceAnimation(),this.addDesktopListeners()}scatterCards(){this.DOM.cards.forEach(t=>{s.set(t,{xPercent:10*s.utils.random(-1,1),yPercent:10*s.utils.random(0,1),rotation:10*s.utils.random(-1,1)})})}createEntranceAnimation(){this.scrollTrigger&&this.scrollTrigger.kill();const t=s.timeline({paused:!0,scrollTrigger:{trigger:this.DOM.container,start:"top bottom-=20%",once:!0,onEnter:()=>{this.scrollTrigger=o.getById(t.scrollTrigger.vars.id)}}});t.fromTo(this.DOM.cards,{x:.8*window.innerWidth,xPercent:10*s.utils.random(-1,1),yPercent:10*s.utils.random(0,1),rotation:40},{x:0,xPercent:10*s.utils.random(-1,1),yPercent:10*s.utils.random(0,1),rotation:()=>10*s.utils.random(-1,1),ease:"elastic.out(1, 1)",duration:1.6,stagger:.1})}addDesktopListeners(){this.DOM.cards.forEach(t=>{t.addEventListener("mouseenter",this.onMouseEnter),t.addEventListener("mouseleave",this.onMouseLeave)})}removeDesktopListeners(){this.DOM.cards.forEach(t=>{t.removeEventListener("mouseenter",this.onMouseEnter),t.removeEventListener("mouseleave",this.onMouseLeave)})}onMouseEnter(t){t.preventDefault();const{currentTarget:e}=t,i=this.DOM.cards.indexOf(e);this.leaveCard(this.currentCardIndex),this.currentCardIndex=i,this.hoverCard(this.currentCardIndex)}onMouseLeave(t){t.preventDefault(),this.leaveCard(this.currentCardIndex),this.currentCardIndex=null,s.to(this.DOM.cardsContent,{xPercent:0,ease:"elastic.out(1, 0.85)",duration:.8,overwrite:!0})}hoverCard(t){null!=t&&(s.to(this.DOM.cards[t],{xPercent:0,yPercent:0,rotation:0,scale:1.1,duration:1.2,ease:"elastic.out(1, 0.85)"}),this.DOM.cardsContent.forEach((e,i)=>{const a=i-t;0!==a?s.to(e,{xPercent:33/a,ease:"elastic.out(1, 0.85)",duration:1.2}):s.to(e,{xPercent:0,ease:"elastic.out(1, 0.85)",duration:1.2})}))}leaveCard(t){null!=t&&s.to(this.DOM.cards[t],{xPercent:10*s.utils.random(-1,1),yPercent:10*s.utils.random(0,1),rotation:10*s.utils.random(-1,1),scale:1,duration:1.2,ease:"elastic.out(1, 0.85)"})}resetCards(){s.set([this.DOM.cards,this.DOM.cardsContent],{clearProps:"all"}),this.currentCardIndex=null}cleanup(){this.scrollTrigger&&(this.scrollTrigger.kill(),this.scrollTrigger=null),s.killTweensOf([this.DOM.cards,this.DOM.cardsContent])}}s.registerPlugin(o);class Y extends _{static ANIM_TYPES={HIGH_LINES:"high-lines",FADE_IN:"fade-in",SLIDE_UP:"slide-up",COLOR_FILL:"color-fill"};constructor(){super(),this.animationTimeline=null,this.scrollTriggerInstance=null,this.animationType=null,this.animationConfig={},this.isAnimating=!1}async connectedCallback(){this.animationType=this.getAttribute("data-anim"),this.animationType&&this.parseAnimationConfig(),await super.connectedCallback()}disconnectedCallback(){this.cleanupAnimation(),super.disconnectedCallback()}parseAnimationConfig(){const t=this.getAttribute("data-anim-config")||"",e={[Y.ANIM_TYPES.HIGH_LINES]:{direction:"right",color:"lime",delay:0,textRevealDuration:.6,highlightRevealDuration:.6,staggerDelay:.15},[Y.ANIM_TYPES.FADE_IN]:{duration:.8,stagger:.05,delay:0},[Y.ANIM_TYPES.SLIDE_UP]:{duration:.8,stagger:.05,delay:0,distance:50},[Y.ANIM_TYPES.COLOR_FILL]:{initialColor:"rgba(0,0,0, .3)",start:"top 70%",end:"top 30%",scrub:1,markers:!1,stagger:.06}};this.animationConfig={...e[this.animationType]},t&&t.split(",").map(t=>t.trim()).forEach(t=>{const[e,i]=t.split(":").map(t=>t.trim());e&&void 0!==i&&(this.animationConfig[e]=isNaN(i)?i:parseFloat(i))})}split(){super.split(),this.animationType&&setTimeout(()=>{this.animationTimeline&&this.cleanupAnimation(),this.initAnimation()},0)}initAnimation(){const t=this.closest("[data-hero-animation-container]");switch(this.animationType){case Y.ANIM_TYPES.HIGH_LINES:this.setupHighLines();break;case Y.ANIM_TYPES.FADE_IN:this.setupFadeIn();break;case Y.ANIM_TYPES.SLIDE_UP:this.setupSlideUp();break;case Y.ANIM_TYPES.COLOR_FILL:this.setupColorFill();break;default:return}!t&&this.animationTimeline&&this.animationType!==Y.ANIM_TYPES.COLOR_FILL?this.scrollTriggerInstance=o.create({trigger:this,start:"top 90%",once:!0,onEnter:()=>this.play()}):t&&this.animationType!==Y.ANIM_TYPES.COLOR_FILL&&this.play()}getAllLines(){if(this.isRichText&&this.richTextSplitInstances.length){const t=[];return this.richTextSplitInstances.forEach(e=>{e&&e.lines&&t.push(...e.lines)}),t}return this.splitInstance?.lines||[]}getItemsByType(t){if(this.isRichText&&this.richTextSplitInstances.length){const e=[];return this.richTextSplitInstances.forEach(i=>{i&&i[t]&&e.push(...i[t])}),e}return this.splitInstance?.[t]||[]}setupHighLines(){const{direction:t,color:e,delay:i,textRevealDuration:a,highlightRevealDuration:n,staggerDelay:r}=this.animationConfig,o={accent:"var(--_color---neutral--black, #221d19)",lime:"var(--color--lime, #d2ff00)","lime-off":"var(--color--lime-off, #b2c73a)","dark-green":"var(--color--dark-green, #282c20)","dark-green-tint-1":"var(--color--dark-green-tint-1, #3b3c38)",black:"var(--color--black, #111112)",white:"var(--color--white, #f4f4ed)"},l=o[e]||o.lime,h=this.getAllLines();h.length&&(this.animationTimeline=s.timeline({paused:!0,delay:i/1e3}),h.forEach((e,i)=>{e.style.position="relative";const o="right"===t?"inset(0 100% 0 0)":"inset(0 0 0 100%)";s.set(e,{clipPath:o,autoAlpha:1});const h=document.createElement("div");h.className="high-line-reveal",h.style.position="absolute",h.style.top="0",h.style.left="0",h.style.width="100%",h.style.height="100%",h.style.backgroundColor=l,h.style.borderRadius=".2em ",h.style.transformOrigin="right"===t?"right center":"left center",h.style.zIndex="5",e.appendChild(h),s.set(h,{scaleX:1});const c=i*r,d="right"===t?"inset(0 0% 0 0)":"inset(0 0 0 0%)";this.animationTimeline.to(e,{clipPath:d,duration:a,ease:"power2.out"},c),this.animationTimeline.to(h,{scaleX:0,duration:n,ease:"power2.inOut"},c+a/2)}))}setupFadeIn(){const{duration:t,stagger:e,delay:i}=this.animationConfig,a=this.getItems();a.length&&(this.animationTimeline=s.timeline({paused:!0,delay:i/1e3}),this.animationTimeline.fromTo(a,{opacity:0},{opacity:1,duration:t,stagger:e,ease:"power2.out"}))}setupSlideUp(){const{duration:t,stagger:e,delay:i,distance:a}=this.animationConfig,n=this.getItems();n.length&&(this.animationTimeline=s.timeline({paused:!0,delay:i/1e3}),this.animationTimeline.fromTo(n,{opacity:0,yPercent:a},{opacity:1,yPercent:0,duration:t,stagger:e,ease:"power2.out"}))}setupColorFill(){const{initialColor:t,start:e,end:i,scrub:a,markers:n,stagger:r}=this.animationConfig,l=window.getComputedStyle(this).color,h=this.getItemsByType("chars");h.length&&(s.set(h,{color:t}),this.animationTimeline=s.timeline({paused:!0}),this.animationTimeline.to(h,{color:l,stagger:r,ease:"none",duration:.1}),this.scrollTriggerInstance=o.create({trigger:this,start:e,end:i,markers:n,scrub:a,animation:this.animationTimeline}))}cleanupAnimation(){this.animationTimeline&&(this.animationTimeline.kill(),this.animationTimeline=null),this.scrollTriggerInstance&&(this.scrollTriggerInstance.kill(),this.scrollTriggerInstance=null),this.querySelectorAll(".high-line-reveal").forEach(t=>t.remove())}play(){return this.animationTimeline?(this.isAnimating=!0,this.animationTimeline.play()):null}pause(){return this.animationTimeline?(this.isAnimating=!1,this.animationTimeline.pause()):null}restart(){return this.animationTimeline?(this.isAnimating=!0,this.animationTimeline.restart()):null}reverse(){return this.animationTimeline?this.animationTimeline.reverse():null}seek(t){return this.animationTimeline?this.animationTimeline.seek(t):null}getProgress(){return this.animationTimeline?.progress()||0}setProgress(t){return this.animationTimeline?this.animationTimeline.progress(t):null}animateHighLines(t={}){return this.animationConfig={...this.animationConfig,...t},this.cleanupAnimation(),this.setupHighLines(),this.play()}animateFadeIn(t={}){return this.animationConfig={...this.animationConfig,...t},this.cleanupAnimation(),this.setupFadeIn(),this.play()}animateSlideUp(t={}){return this.animationConfig={...this.animationConfig,...t},this.cleanupAnimation(),this.setupSlideUp(),this.play()}animateColorFill(t={}){return this.animationConfig={...this.animationConfig,...t},this.cleanupAnimation(),this.setupColorFill(),this.scrollTriggerInstance}}s.registerPlugin(o);class H extends HTMLElement{constructor(){super(),this.$pathDesktop=null,this.$svgDesktop=null,this.$imageDesktop=null,this.$pathMobile=null,this.$svgMobile=null,this.$imageMobile=null,this.$activePath=null,this.$activeSvg=null,this.$activeImage=null,this.$activeClipId=null,this.scrollTriggerInstance=null,this.animationInstance=null,this.isMobile=!1,this.isInitialized=!1}connectedCallback(){this.$svgDesktop=this.querySelector(".clip-svg:not(.clip-svg-mobile)"),this.$svgMobile=this.querySelector(".clip-svg-mobile"),(this.$svgDesktop||this.$svgMobile)&&(this.$svgDesktop&&(this.$pathDesktop=this.$svgDesktop.querySelector("[data-morph-path]")),this.$svgMobile&&(this.$pathMobile=this.$svgMobile.querySelector("[data-morph-path]")),(this.$pathDesktop||this.$pathMobile)&&(this.bindEvents(),this.updateActiveElements(),this.setupClipPath(),this.setupImageResponsive(),this.setupMorph(),this.isInitialized=!0))}disconnectedCallback(){this.unbindEvents(),this.destroy(),this.isInitialized=!1}bindEvents(){this.unbindScreenListener=f.subscribe(()=>this.refresh()),this.unbindDeviceListener=n(C,["isSmall"],this.onSmallScreenChange)}unbindEvents(){this.unbindScreenListener?.(),this.unbindDeviceListener?.()}updateActiveElements(){const t=parseInt(this.dataset.morphMobileBreakpoint||"768",10),e=window.matchMedia(`(max-width: ${t}px)`);this.isMobile=e.matches,this.isMobile&&this.$svgMobile&&this.$pathMobile?(this.$activeSvg=this.$svgMobile,this.$activePath=this.$pathMobile,this.$activeImage=this.$imageMobile,this.$svgMobile.style.display="block",this.$svgDesktop&&(this.$svgDesktop.style.display="none")):(this.$activeSvg=this.$svgDesktop||this.$svgMobile,this.$activePath=this.$pathDesktop||this.$pathMobile,this.$activeImage=this.$imageDesktop||this.$imageMobile,this.$svgDesktop&&(this.$svgDesktop.style.display="block"),this.$svgMobile&&(this.$svgMobile.style.display="none"));const i=this.dataset.morphImageSelector||"image";this.$activeImage=this.$activeSvg?.querySelector(i)||null}setupClipPath(){if(!this.$activePath||!this.$activeSvg)return;const t=this.dataset.morphClipId,e=this.dataset.morphClipIdDesktop||t,i=this.dataset.morphClipIdMobile||t,s=this.isMobile?i:e;if(!s)return;const a=this.$activeSvg;if(!this.$activePath.id){const t=this.isMobile?"mobile":"desktop";this.$activePath.id=`${s}-path-${t}`}let n=a.querySelector("defs");n||(n=document.createElementNS("http://www.w3.org/2000/svg","defs"),a.insertBefore(n,a.firstChild));let r=n.querySelector(`#${s}`);r||(r=document.createElementNS("http://www.w3.org/2000/svg","clipPath"),r.id=s,n.appendChild(r)),r.setAttribute("clipPathUnits","userSpaceOnUse"),Array.from(r.children).forEach(t=>r.removeChild(t));const o=this.$activePath.cloneNode(!0);o.removeAttribute("data-morph-path"),o.removeAttribute("data-morph-target"),r.appendChild(o),this.$clipPathClone=o,this.$activeClipId=s}setupImageResponsive(){if(!this.$activeImage||!this.$activeSvg)return;const t=this.$activeClipId,e=(this.$activeSvg.getAttribute("viewBox")||"0 0 1340 650").split(" ").map(Number),i=e[2],s=e[3];this.$activeImage.setAttribute("x","0"),this.$activeImage.setAttribute("y","0"),this.$activeImage.setAttribute("width",String(i)),this.$activeImage.setAttribute("height",String(s));const a=this.dataset.morphAspectRatio||"xMidYMid slice";this.$activeImage.setAttribute("preserveAspectRatio",a),t&&this.$activeImage.setAttribute("clip-path",`url(#${t})`)}setupMorph(){if(!this.$activePath)return;const t=this.$activePath.dataset.morphTarget;if(!t)return;const e=this.dataset.morphTrigger||this,i=this.dataset.morphStart||"top center",a=this.dataset.morphEnd||"center center",n=parseFloat(this.dataset.morphScrub)||1,r="true"===this.dataset.morphMarkers,o=this.$clipPathClone?[this.$activePath,this.$clipPathClone]:this.$activePath;this.animationInstance=s.to(o,{attr:{d:t},ease:"none",scrollTrigger:{trigger:e,start:i,end:a,scrub:n,markers:r,onRefresh:()=>this.onRefresh(),onUpdate:t=>this.onUpdate(t)}}),this.scrollTriggerInstance=this.animationInstance.scrollTrigger}onSmallScreenChange=()=>{if(!this.isInitialized)return;const t=this.isMobile;this.updateActiveElements(),t!==this.isMobile?(this.destroy(),this.setupClipPath(),this.setupImageResponsive(),this.setupMorph()):this.refresh()};onRefresh(){}onUpdate(t){}refresh(){this.scrollTriggerInstance?.refresh()}destroy(){this.animationInstance&&(this.animationInstance.kill(),this.animationInstance=null),this.scrollTriggerInstance&&(this.scrollTriggerInstance.kill(),this.scrollTriggerInstance=null),this.$clipPathClone=null}reset(){this.animationInstance?.progress(0)}complete(){this.animationInstance?.progress(1)}getProgress(){return this.animationInstance?.progress()||0}setProgress(t){const e=Math.max(0,Math.min(1,t));this.animationInstance?.progress(e)}isMobileActive(){return this.isMobile}}class W extends HTMLElement{static DEFAULT_BACKGROUND="var(--_color---secondary--warm-white)";static DEFAULT_HEIGHT="15rem";static DEFAULT_BLUR="4rem";static POSITION_TOP="top";static POSITION_BOTTOM="bottom";constructor(){super(),this.backgroundColor=null,this.position=null,this.height=null,this.blurAmount=null,this.isTop=!1,this.onResize=this.onResize.bind(this)}connectedCallback(){try{this.detectConfig(),this.setupBlur(),this.bindEvents()}catch(t){}}disconnectedCallback(){this.unbindEvents()}detectConfig(){this.backgroundColor=this.dataset.blurBackground||W.DEFAULT_BACKGROUND,this.position=this.dataset.blurPosition||W.POSITION_TOP,this.height=this.dataset.blurHeight||W.DEFAULT_HEIGHT,this.blurAmount=this.dataset.blurAmount||W.DEFAULT_BLUR,this.isTop=this.position===W.POSITION_TOP}setupBlur(){this.classList.add("progressive-blur"),this.style.position="fixed",this.style.left="0",this.style.width="100%",this.style.pointerEvents="none",this.style.userSelect="none",this.style.WebkitUserSelect="none",this.style.zIndex="998",this.applyPositionStyles()}applyPositionStyles(){this.style[this.isTop?"top":"bottom"]="0",this.style.height=this.height;const t=this.isTop?"to top":"to bottom";this.style.background=`linear-gradient(${t}, transparent 0%, ${this.backgroundColor}) 100%`;const e=`linear-gradient(${this.isTop?"to bottom":"to top"}, ${this.backgroundColor} 0%, transparent)`;this.style.maskImage=e,this.style.WebkitMaskImage=e,this.style.backdropFilter=`blur(${this.blurAmount})`,this.style.WebkitBackdropFilter=`blur(${this.blurAmount})`}bindEvents(){window.addEventListener("resize",this.onResize)}unbindEvents(){window.removeEventListener("resize",this.onResize)}onResize(){requestAnimationFrame(()=>{this.applyPositionStyles()})}updateBackground(t){this.backgroundColor=t,this.dataset.blurBackground=t,this.applyPositionStyles()}updatePosition(t){t!==W.POSITION_TOP&&t!==W.POSITION_BOTTOM||(this.style[this.isTop?"top":"bottom"]="",this.position=t,this.dataset.blurPosition=t,this.isTop=t===W.POSITION_TOP,this.applyPositionStyles())}updateHeight(t){this.height=t,this.dataset.blurHeight=t,this.applyPositionStyles()}updateBlurAmount(t){this.blurAmount=t,this.dataset.blurAmount=t,this.applyPositionStyles()}}s.registerPlugin(o);class j extends HTMLElement{static ANIM_TYPES={VERTICAL_REVEAL:"vertical-reveal",HORIZONTAL_REVEAL:"horizontal-reveal",CIRCLE_REVEAL:"circle-reveal",LINE_REVEAL:"line-reveal",RECT_REVEAL:"rect-reveal",FADE_IN:"fade-in",SCALE_IN:"scale-in"};constructor(){super(),this.animationTimeline=null,this.scrollTriggerInstance=null,this.animationType=null,this.animationConfig={},this.isAnimating=!1,this.clones=[],this.originalImage=null,this.imageContainer=null,this.isImageLoaded=!1}async connectedCallback(){this.animationType=this.getAttribute("data-anim"),this.animationType&&(this.parseAnimationConfig(),await this.waitForImageLoad(),this.init())}disconnectedCallback(){this.cleanupAnimation()}parseAnimationConfig(){const t=this.getAttribute("data-anim-config")||"",e={[j.ANIM_TYPES.VERTICAL_REVEAL]:{cloneCount:5,duration:1.2,stagger:.1,delay:0,ease:"power2.inOut"},[j.ANIM_TYPES.HORIZONTAL_REVEAL]:{cloneCount:5,duration:1.2,stagger:.1,delay:0,ease:"power2.inOut"},[j.ANIM_TYPES.CIRCLE_REVEAL]:{cloneCount:8,duration:1.5,stagger:.08,delay:0,ease:"power2.out",sizeMultiplier:.82},[j.ANIM_TYPES.LINE_REVEAL]:{cloneCount:6,angle:15,duration:1.2,stagger:.1,delay:0,ease:"power2.inOut"},[j.ANIM_TYPES.RECT_REVEAL]:{cloneCount:6,duration:1.2,stagger:.08,delay:0,ease:"power2.out"},[j.ANIM_TYPES.FADE_IN]:{duration:1,delay:0,ease:"power2.out"},[j.ANIM_TYPES.SCALE_IN]:{duration:1.2,delay:0,ease:"power2.out",startScale:.8}};this.animationConfig={...e[this.animationType]},t&&t.split(",").map(t=>t.trim()).forEach(t=>{const[e,i]=t.split(":").map(t=>t.trim());e&&void 0!==i&&(this.animationConfig[e]="true"===i||"false"!==i&&(isNaN(i)?i:parseFloat(i)))})}waitForImageLoad(){return new Promise(t=>{if(this.originalImage=this.querySelector("img"),this.originalImage){if(this.originalImage.complete&&0!==this.originalImage.naturalHeight)return this.isImageLoaded=!0,void t();this.originalImage.addEventListener("load",()=>{this.isImageLoaded=!0,t()},{once:!0}),this.originalImage.addEventListener("error",()=>{t()},{once:!0})}else t()})}init(){if(!this.originalImage||!this.isImageLoaded)return;this.prepareContainer(),this.setupAnimation();const t=this.closest("[data-hero-animation-container]");!t&&this.animationTimeline?this.scrollTriggerInstance=o.create({trigger:this,start:"top 90%",once:!0,onEnter:()=>this.play()}):t&&this.animationTimeline&&this.play()}prepareContainer(){this.imageContainer||(this.imageContainer=document.createElement("div"),this.imageContainer.className="animated-image-container",this.imageContainer.style.position="relative",this.imageContainer.style.width="100%",this.imageContainer.style.height="100%",this.imageContainer.style.overflow="hidden",this.originalImage.parentNode.insertBefore(this.imageContainer,this.originalImage),this.imageContainer.appendChild(this.originalImage)),this.originalImage.classList.add("animated-image-original"),this.originalImage.style.position="relative",this.originalImage.style.display="block",this.originalImage.style.width="100%",this.originalImage.style.height="auto"}createClones(t){const e=document.createDocumentFragment();for(let i=0;i<t-1;i++){const t=this.originalImage.cloneNode(!0);t.classList.add("animated-image-clone"),t.style.position="absolute",t.style.top="0",t.style.left="0",t.style.width="100%",t.style.height="100%",t.style.objectFit=this.originalImage.style.objectFit||"cover",this.clones.push(t),e.appendChild(t)}this.imageContainer.appendChild(e)}getAllImages(){return[this.originalImage,...this.clones]}setupAnimation(){switch(this.animationType){case j.ANIM_TYPES.VERTICAL_REVEAL:this.setupVerticalReveal();break;case j.ANIM_TYPES.HORIZONTAL_REVEAL:this.setupHorizontalReveal();break;case j.ANIM_TYPES.CIRCLE_REVEAL:this.setupCircleReveal();break;case j.ANIM_TYPES.LINE_REVEAL:this.setupLineReveal();break;case j.ANIM_TYPES.RECT_REVEAL:this.setupRectReveal();break;case j.ANIM_TYPES.FADE_IN:this.setupFadeIn();break;case j.ANIM_TYPES.SCALE_IN:this.setupScaleIn();break;default:return}}setupVerticalReveal(){const{cloneCount:t,duration:e,stagger:i,delay:a,ease:n}=this.animationConfig;this.createClones(t);const r=this.getAllImages(),o=100/r.length;r.forEach((t,e)=>{const i=o*e,a=100-(i+o+.05);s.set(t,{clipPath:`inset(0% ${a}% 0% ${i}%)`,willChange:"clip-path"})}),this.animationTimeline=s.timeline({paused:!0,delay:a/1e3}),this.animationTimeline.to(r,{clipPath:t=>`inset(0% 0% 0% ${o*t}%)`,duration:e,stagger:i,ease:n})}setupHorizontalReveal(){const{cloneCount:t,duration:e,stagger:i,delay:a,ease:n}=this.animationConfig;this.createClones(t);const r=this.getAllImages(),o=100/r.length;r.forEach((t,e)=>{const i=o*e,a=100-(i+o+.06);s.set(t,{clipPath:`inset(${i}% 0% ${a}%)`,willChange:"clip-path"})}),this.animationTimeline=s.timeline({paused:!0,delay:a/1e3}),this.animationTimeline.to(r,{clipPath:t=>`inset(${o*t}% 0% 0%)`,duration:e,stagger:i,ease:n})}setupCircleReveal(){const{cloneCount:t,duration:e,stagger:i,delay:a,ease:n,sizeMultiplier:r}=this.animationConfig;this.createClones(t);const o=this.getAllImages(),l=100/o.length;o.forEach((t,e)=>{const i=l*e*r;s.set(t,{clipPath:`circle(${i}% at 50% 50%)`,zIndex:o.length-e,willChange:"clip-path"})}),this.animationTimeline=s.timeline({paused:!0,delay:a/1e3}),this.animationTimeline.to(o,{clipPath:"circle(100% at 50% 50%)",duration:e,stagger:i,ease:n})}setupLineReveal(){const{cloneCount:t,angle:e,duration:i,stagger:a,delay:n,ease:r}=this.animationConfig;this.createClones(t);const o=this.getAllImages(),l=(100+e)/100,h=100/o.length*l;o.forEach((t,i)=>{const a=h*i-e,n=a+h+.04,r=h*i,o=r+h+.04;s.set(t,{clipPath:`polygon(${r}% 0%, ${o}% 0%, ${n}% 100%, ${a}% 100%)`,willChange:"clip-path"})}),this.animationTimeline=s.timeline({paused:!0,delay:n/1e3}),this.animationTimeline.to(o,{clipPath:t=>{const e=h*t;return`polygon(${e}% 0%, 100% 0%, 100% 100%, ${e}% 100%)`},duration:i,stagger:a,ease:r})}setupRectReveal(){const{cloneCount:t,duration:e,stagger:i,delay:a,ease:n}=this.animationConfig;this.createClones(t);const r=this.getAllImages(),o=50/r.length;r.forEach((t,e)=>{const i=50-o*e-o;s.set(t,{clipPath:`inset(${i}%)`,zIndex:r.length-e,willChange:"clip-path"})}),this.animationTimeline=s.timeline({paused:!0,delay:a/1e3}),this.animationTimeline.to(r,{clipPath:"inset(0%)",duration:e,stagger:i,ease:n})}setupFadeIn(){const{duration:t,delay:e,ease:i}=this.animationConfig;s.set(this.originalImage,{opacity:0}),this.animationTimeline=s.timeline({paused:!0,delay:e/1e3}),this.animationTimeline.to(this.originalImage,{opacity:1,duration:t,ease:i})}setupScaleIn(){const{duration:t,delay:e,ease:i,startScale:a}=this.animationConfig;s.set(this.originalImage,{opacity:0,scale:a}),this.animationTimeline=s.timeline({paused:!0,delay:e/1e3}),this.animationTimeline.to(this.originalImage,{opacity:1,scale:1,duration:t,ease:i})}cleanupAnimation(){this.animationTimeline&&(this.animationTimeline.kill(),this.animationTimeline=null),this.scrollTriggerInstance&&(this.scrollTriggerInstance.kill(),this.scrollTriggerInstance=null),this.clones.forEach(t=>t.remove()),this.clones=[],this.originalImage&&s.set(this.originalImage,{clearProps:"all"})}play(){return this.animationTimeline?(this.isAnimating=!0,this.animationTimeline.play()):null}pause(){return this.animationTimeline?(this.isAnimating=!1,this.animationTimeline.pause()):null}restart(){return this.animationTimeline?(this.isAnimating=!0,this.animationTimeline.restart()):null}reverse(){return this.animationTimeline?this.animationTimeline.reverse():null}seek(t){return this.animationTimeline?this.animationTimeline.seek(t):null}getProgress(){return this.animationTimeline?.progress()||0}setProgress(t){return this.animationTimeline?this.animationTimeline.progress(t):null}animate(t,e={}){return this.animationType=t,this.animationConfig={...this.animationConfig,...e},this.cleanupAnimation(),this.setupAnimation(),this.play()}animateVerticalReveal(t={}){return this.animate(j.ANIM_TYPES.VERTICAL_REVEAL,t)}animateHorizontalReveal(t={}){return this.animate(j.ANIM_TYPES.HORIZONTAL_REVEAL,t)}animateCircleReveal(t={}){return this.animate(j.ANIM_TYPES.CIRCLE_REVEAL,t)}animateLineReveal(t={}){return this.animate(j.ANIM_TYPES.LINE_REVEAL,t)}animateRectReveal(t={}){return this.animate(j.ANIM_TYPES.RECT_REVEAL,t)}animateFadeIn(t={}){return this.animate(j.ANIM_TYPES.FADE_IN,t)}animateScaleIn(t={}){return this.animate(j.ANIM_TYPES.SCALE_IN,t)}}customElements.get("animated-image")||customElements.define("animated-image",j);const X=[{name:"c-split",class:_,type:"Split"},{name:"c-sequence-canvas",class:B,type:"SequenceCanvas"},{name:"c-cards-stack",class:V,type:"CardsStack"},{name:"c-animated-text",class:Y,type:"AnimatedText"},{name:"c-morph-shape",class:H,type:"MorphShape"},{name:"c-progressive-blur",class:W,type:"ProgressiveBlur"},{name:"c-animated-image",class:j,type:"AnimatedImage"}],G={};class K{constructor(){this.onVisitStartBind=this.onVisitStart.bind(this),this.beforeContentReplaceBind=this.beforeContentReplace.bind(this),this.onContentReplaceBind=this.onContentReplace.bind(this),this.onAnimationInEndBind=this.onAnimationInEnd.bind(this),this.onAnimationOutStartBind=this.onAnimationOutStart.bind(this),this.goTo=this.goTo.bind(this),this.onPageView=this.onPageView.bind(this)}init(){this.initSwup(),this.bindEvents(),requestAnimationFrame(()=>{U.classList.add(M.READY)})}destroy(){this.unbindEvents(),this.swup?.destroy()}bindEvents(){window.addEventListener(L.GO_TO,this.goTo),this.swup.hooks.on("visit:start",this.onVisitStartBind),this.swup.hooks.before("content:replace",this.beforeContentReplaceBind),this.swup.hooks.on("content:replace",this.onContentReplaceBind),this.swup.hooks.on("animation:in:end",this.onAnimationInEndBind),this.swup.hooks.on("animation:out:start",this.onAnimationOutStartBind),this.swup.hooks.on("page:view",this.onPageView),this.swup.hooks.on("fetch:error",t=>{}),this.swup.hooks.on("fetch:timeout",t=>{})}unbindEvents(){window.removeEventListener(L.GO_TO,this.goTo)}initSwup(){this.swup=new l({animateHistoryBrowsing:!0,linkToSelf:"navigate",ignoreVisit:(t,{el:e,event:i}={})=>-1!=t.lastIndexOf("#show-cookie-consent")||e?.closest("[data-no-swup]"),plugins:this._getSwupPlugins()})}updateDocumentAttributes(t){const e=(new DOMParser).parseFromString(t.to.html,"text/html"),i={...e.querySelector("html")?.dataset};Object.entries(i).forEach(([t,e])=>{var i;U.setAttribute(`data-${i=t,i.split(/(?=[A-Z])/).join("-").toLowerCase()}`,e??"")})}_getSwupPlugins(){return[new h({preloadHoveredLinks:!0}),new c({announcements:{"en-US":{visit:"Navigated to: {title}",url:"New page at {url}"},"de-DE":{visit:"Navigiert zu: {title}",url:"Neue Seite unter {url}"},"fr-FR":{visit:"Navigué vers : {title}",url:"Nouvelle page à {url}"},"*":{visit:"{title}",url:"{url}"}}}),new d({offset:120}),new m({routes:[{name:"home",path:"/"},{name:"404",path:"/404"},{name:"any",path:"(.*)"}]})]}goTo(t){this.swup.navigate(t.detail)}onVisitStart(t){if(t.fragmentVisit||(t.scroll.reset=!1,U.classList.add(M.TRANSITION),U.classList.remove(M.READY)),t.fragmentVisit)switch(t.fragmentVisit.name){case"open-modal":y("Dialog").forEach(t=>{t.open()});break;case"close-modal":y("Dialog").forEach(t=>{t.close()});break;case"listing":q.scrollTo("#listing",{offset:-200})}window.dispatchEvent(new CustomEvent(L.VISIT_START,{detail:t}))}beforeContentReplace(t){t.fragmentVisit||q?.destroy()}onContentReplace(t){t.fragmentVisit?t.fragmentVisit.name:window.scrollTo(0,0),t.fragmentVisit||(q?.init(),this.updateDocumentAttributes(t))}onAnimationOutStart(t){t.fragmentVisit}onAnimationInEnd(t){t.fragmentVisit||(window.scrollTo(0,0),U.classList.remove(M.TRANSITION),U.classList.add(M.READY))}onPageView(t){const e=t.to.document.querySelector("html").getAttribute("data-wf-page");e&&document.documentElement.setAttribute("data-wf-page",e),window.Webflow.destroy(),window.Webflow.ready()}}class Q{constructor(){this.isInitialized=!1,this.load=null,this.startTime=performance.now()}async initialize(){try{await this.setupGlobals(),this.registerComponents(),this.setupScrolling(),this.setupRouting(),await this.loadFonts(),this.markAsReady(),this.isInitialized=!0,Math.round(performance.now()-this.startTime),this.setupDevHelpers()}catch(t){throw t}}async setupGlobals(){try{await async function(){A.IS_DEV&&function(t,e,i){let s=Promise.resolve();if(e&&e.length>0){let t=function(t){return Promise.all(t.map(t=>Promise.resolve(t).then(t=>({status:"fulfilled",value:t}),t=>({status:"rejected",reason:t}))))};const a=document.getElementsByTagName("link"),n=document.querySelector("meta[property=csp-nonce]"),r=n?.nonce||n?.getAttribute("nonce");s=t(e.map(t=>{if(t=function(t,e){return new URL(t,e).href}(t,i),t in G)return;G[t]=!0;const e=t.endsWith(".css"),s=e?'[rel="stylesheet"]':"";if(i)for(let i=a.length-1;i>=0;i--){const s=a[i];if(s.href===t&&(!e||"stylesheet"===s.rel))return}else if(document.querySelector(`link[href="${t}"]${s}`))return;const n=document.createElement("link");return n.rel=e?"stylesheet":"modulepreload",e||(n.as="script"),n.crossOrigin="",n.href=t,r&&n.setAttribute("nonce",r),document.head.appendChild(n),e?new Promise((e,i)=>{n.addEventListener("load",e),n.addEventListener("error",()=>i(new Error(`Unable to preload CSS for ${t}`)))}):void 0}))}function a(t){const e=new Event("vite:preloadError",{cancelable:!0});if(e.payload=t,window.dispatchEvent(e),!e.defaultPrevented)throw t}return s.then(e=>{for(const t of e||[])"rejected"===t.status&&a(t.reason);return t().catch(a)})}(async()=>{const{default:t}=await import("./vendors.js").then(t=>t.f);return{default:t}},[],import.meta.url).then(({default:t})=>{new t({columns:"var(--grid-columns)",gutterWidth:"var(--grid-gutter)",marginWidth:"var(--grid-margin)",opacity:.1,key:"g",breakpoints:{1440:{columns:12}}})}).catch(t=>{}),b.subscribe(()=>{const t=document.documentElement.style,e=.01*document.body.clientWidth;t.setProperty("--vw",`${e.toFixed(2)}px`);const i=.01*window.innerHeight;if(t.setProperty("--vh",`${i.toFixed(2)}px`),A.SUPPORTS_VH)return;const s=.01*document.documentElement.clientHeight;t.setProperty("--svh",`${s}px`);const a=.01*window.innerHeight;if(t.setProperty("--dvh",`${a}px`),document.body){const e=document.createElement("div");e.style.width="1px",e.style.height="100vh",e.style.position="fixed",e.style.left="0",e.style.top="0",e.style.bottom="0",e.style.visibility="hidden",document.body.appendChild(e);var n=e.clientHeight;e.remove();const i=.01*n;t.setProperty("--lvh",`${i}px`)}})}()}catch(t){}}registerComponents(){try{!function(){const t={registered:0,skipped:0,failed:0};X.forEach(({name:e,class:i,type:s,webgl:a=!1})=>{try{customElements.define(e,u(i,s)),t.registered++}catch(n){t.failed++}})}()}catch(t){throw t}}setupScrolling(){try{q.init(),q.start()}catch(t){}}setupRouting(){try{this.load=new K,this.load.init()}catch(t){}}async loadFonts(){if(O)try{const t=await async function(t){if(0===(t.size??t.length))throw new TypeError("Expected at least one font");return await async function(t){const e=[];for(const i of t)i instanceof FontFace?(document.fonts.has(i)||document.fonts.add(i),e.push(R(i))):e.push(...$(i).map(t=>R(t)));return await Promise.all(e)}([...t])}(P.EAGER,A.IS_DEV);document.documentElement.classList.add(M.FONTS_LOADED),A.IS_DEV&&t.length>0&&t.slice(0,3).forEach(t=>{})}catch(t){}}markAsReady(){const t=document.documentElement;t.classList.add(M.FIRST_LOADED,M.LOADED,M.READY),t.classList.remove(M.LOADING),t.classList.toggle("is-safari",-1!==navigator.userAgent.indexOf("Safari")&&-1!==navigator.userAgent.indexOf("Version")&&-1===navigator.userAgent.indexOf("Chrome"))}setupDevHelpers(){A.IS_DEV&&(window.appDebug={app:this,scroll:q,load:this.load,components:()=>document.querySelectorAll("[data-prototype-type]"),webgl:()=>document.querySelectorAll("c-gl-text, c-gl-video, c-gl-image, c-gl-about"),perf:()=>{performance.getEntriesByType("navigation")[0]},reloadComponents:()=>{this.registerComponents()}})}destroy(){try{this.load?.destroy(),q.destroy(),A.IS_DEV&&window.appDebug&&(delete window.appDebug,delete window.app),this.isInitialized=!1}catch(t){}}getStatus(){return{initialized:this.isInitialized,hasRouting:!!this.load,hasScrolling:!!q.locomotiveScroll,fonts:document.documentElement.classList.contains(M.FONTS_LOADED),environment:A.NAME,uptime:Math.round(performance.now()-this.startTime)}}}new Promise(t=>{"complete"===document.readyState?t():window.addEventListener("load",()=>{t()})}).then(async function(){try{document.getElementById("designerStyles")?.remove();const t=new Q;await t.initialize()}catch(t){document.body.innerHTML='\n      <div style="\n        display: flex; \n        align-items: center; \n        justify-content: center; \n        height: 100vh; \n        font-family: system-ui; \n        background: #f5f5f5;\n        color: #666;\n      ">\n        <div style="text-align: center;">\n          <h1 style="margin: 0 0 10px 0; color: #333;">App Failed to Load</h1>\n          <p style="margin: 0;">Check console for details</p>\n        </div>\n      </div>\n    '}});
